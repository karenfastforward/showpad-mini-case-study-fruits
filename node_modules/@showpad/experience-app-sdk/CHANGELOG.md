# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/).

## [2.2.1] - 2023-01-27

### Fixed

- On the Windows app, `getDeviceInfo().app` will also return `web`. `windows`
  will never be returned

## [2.2.0] - 2023-01-24

### Added

- Added `getShowpadFile` and `getShowpadPreview` to fetch raw files from
  Showpad.
- Added support for storing `undefined` values in arrays and objects.

### Fixed

- Fixed unexpected conversion of `undefined` values to `null`.

## [2.2.0-beta.3] - 2022-12-22

### Added

- Added support for `addAssetsToCollections` and `addAssetsToSharedSpaces`.
- Added `openShowpadUrl` method to programmatically invoke `showpad://` urls.
  (https://help.showpad.com/hc/en-us/articles/211957029-Showpad-URL-scheme-requirements)
- Added support for the Showpad url scheme on `development` and `showpadize`.
  (https://help.showpad.com/hc/en-us/articles/211957029-Showpad-URL-scheme-requirements)

### Fixed

- When calling `getShowpadOAuthApi()` from an alias subdomain the returned `url`
  changed to the new subdomain resulting in a CORS error. Also dependant methods
  were impacted: `getShowpadOAuthApiInteractive()`, `getShowpadOAuthInstance()`,
  `getShowpadOAuthInstanceInteractive()`.

## [2.2.0-beta.2] - 2022-11-03

### Added

- Added optional `options` for the `openAssetViewer()` method to pass `page`
  and/or `modal`:
  https://help.showpad.com/hc/en-us/articles/211957029-Showpad-URL-scheme-requirements
- Added support for api `v4` in `getShowpadInstance`, `getShowpadOAuthInstance`,
  and `getShowpadOAuthInstanceInteractive`.

### Fixed

- `RecordType` should also allow optional fields. See `type-fest`
  [fix](https://github.com/sindresorhus/type-fest/pull/465).
- Fixed bug where the `SDK` thinks its running in development inside a HTML
  Asset on `iOS` and `Android`.
- The `showpadApiCache` is now user suffixed to prevent usage of tokens from
  other users.
- JSBI is used to handle `BigInt`
- `trackExperienceEvent()` and `trackExperiencePageview()` had a wrong
  signature.

## [2.2.0-beta.1] - 2022-09-26

### Changed

- Changed AppsDB record type from `Scalar` to `JsonValue` known from the
  `type-fest` package.
- Changed minimal NODE version to `>= 15.0.0`.
- Changed entry point in `package.json` from `module` to `exports` as this it
  the NodeJS standard:
  https://stackoverflow.com/questions/42708484/what-is-the-module-package-json-field-for.
- `TrackEventPageView` has been renamed to `PageViewTouchpoint` and now hold the
  correct fields for the touchpoint.
- `TrackEventEvent` has been renamed to `EventTouchpoint` and now hold the
  correct fields for the touchpoint.

### Fixed

- Fixed `Uncaught (in promise) Error` error when calling `onShowpadLibLoaded` in
  an external context.

## [2.1.8] - 2022-06-20

### Added

- Added support for `arraybuffer` & `blob` response on the Proxy app or
  Showpadize.
- Added `V3ApiRef` type.

### Fixed

- Fixed `formData` filename was lost when using the Proxy app or Showpadize.
- An owner is now also considered as an admin in `isAdmin()`.

### Removed

- Removed `V3EventType` and `V3ExportsEvent` types.

### Changed

- All types starting with `Cms` have been renamed to start with `Sdm`.
- All properties of types starting with `cms` have been renamed to start with
  `sdm`.

## [2.1.7] - 2022-04-13

This release marks the first stable release of the Experience App SDK. Previous
versions are deprecated and should be updated ASAP.

## [1.1.0] - 2021-10-08

Public release.

## [1.0.0] - 2021-10-01

Internal release.
