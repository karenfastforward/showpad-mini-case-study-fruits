// Showpad SDK version: 2.2.1
var u1=Object.defineProperty;var xu=(o,u)=>{for(var e in u)u1(o,e,{get:u[e],enumerable:!0})};import"core-js";var fl={};xu(fl,{getRecordById:()=>vb,getRecords:()=>db,getStoreRecords:()=>hb});import ub from"ajv";import{SDM_PREFIX as p1}from"@showpad/experience-app-types";var a1=Object.create,Gc=Object.defineProperty,s1=Object.getOwnPropertyDescriptor,c1=Object.getOwnPropertyNames,f1=Object.getPrototypeOf,l1=Object.prototype.hasOwnProperty,Wc=(o,u)=>()=>(u||o((u={exports:{}}).exports,u),u.exports),h1=(o,u,e,c)=>{if(u&&typeof u=="object"||typeof u=="function")for(let f of c1(u))!l1.call(o,f)&&f!==e&&Gc(o,f,{get:()=>u[f],enumerable:!(c=s1(u,f))||c.enumerable});return o},Hc=(o,u,e)=>(e=o!=null?a1(f1(o)):{},h1(u||!o||!o.__esModule?Gc(e,"default",{value:o,enumerable:!0}):e,o)),d1=Wc((o,u)=>{(function(e){"use strict";function c(f,i){if(f instanceof Boolean||typeof f=="boolean"||(i instanceof Object||(i={}),i.allowEmpty===!1&&f===""))return!1;var h="(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?",p="(data:\\w+\\/[a-zA-Z\\+\\-\\.]+;base64,)";return i.mimeRequired===!0?h=p+h:i.allowMime===!0&&(h=p+"?"+h),i.paddingRequired===!1&&(h="(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?"),new RegExp("^"+h+"$","gi").test(f)}typeof o<"u"?(typeof u<"u"&&u.exports&&(o=u.exports=c),o.isBase64=c):typeof define=="function"&&define.amd?define([],function(){return c}):e.isBase64=c})(o)}),v1=Wc((o,u)=>{(function(){var e,c="4.17.21",f=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",p="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",a=500,g="__lodash_placeholder__",A=1,N=2,H=4,j=1,G=2,B=1,yt=2,$t=4,lt=8,ar=16,Lt=32,sr=64,Pt=128,$r=256,Qi=512,ll=30,hl="...",dl=800,vl=16,ha=1,pl=2,gl=3,Zr=1/0,Tr=9007199254740991,wl=17976931348623157e292,On=0/0,cr=4294967295,yl=cr-1,_l=cr>>>1,bl=[["ary",Pt],["bind",B],["bindKey",yt],["curry",lt],["curryRight",ar],["flip",Qi],["partial",Lt],["partialRight",sr],["rearg",$r]],le="[object Arguments]",Tn="[object Array]",ml="[object AsyncFunction]",Me="[object Boolean]",qe="[object Date]",xl="[object DOMException]",In="[object Error]",Rn="[object Function]",da="[object GeneratorFunction]",Zt="[object Map]",Ge="[object Number]",Al="[object Null]",dr="[object Object]",va="[object Promise]",Sl="[object Proxy]",We="[object RegExp]",Yt="[object Set]",He="[object String]",Dn="[object Symbol]",El="[object Undefined]",Je="[object WeakMap]",kl="[object WeakSet]",Ke="[object ArrayBuffer]",he="[object DataView]",to="[object Float32Array]",ro="[object Float64Array]",eo="[object Int8Array]",no="[object Int16Array]",io="[object Int32Array]",oo="[object Uint8Array]",uo="[object Uint8ClampedArray]",ao="[object Uint16Array]",so="[object Uint32Array]",Cl=/\b__p \+= '';/g,Ol=/\b(__p \+=) '' \+/g,Tl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pa=/&(?:amp|lt|gt|quot|#39);/g,ga=/[&<>"']/g,Il=RegExp(pa.source),Rl=RegExp(ga.source),Dl=/<%-([\s\S]+?)%>/g,Ll=/<%([\s\S]+?)%>/g,wa=/<%=([\s\S]+?)%>/g,Ul=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jl=/^\w*$/,Fl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,co=/[\\^$.*+?()[\]{}|]/g,zl=RegExp(co.source),fo=/^\s+/,Bl=/\s/,Nl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pl=/\{\n\/\* \[wrapped with (.+)\] \*/,Vl=/,? & /,Ml=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ql=/[()=,{}\[\]\/\s]/,Gl=/\\(\\)?/g,Wl=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ya=/\w*$/,Hl=/^[-+]0x[0-9a-f]+$/i,Jl=/^0b[01]+$/i,Kl=/^\[object .+?Constructor\]$/,$l=/^0o[0-7]+$/i,Zl=/^(?:0|[1-9]\d*)$/,Yl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ln=/($^)/,Xl=/['\n\r\u2028\u2029\\]/g,Un="\\ud800-\\udfff",Ql="\\u0300-\\u036f",th="\\ufe20-\\ufe2f",rh="\\u20d0-\\u20ff",_a=Ql+th+rh,ba="\\u2700-\\u27bf",ma="a-z\\xdf-\\xf6\\xf8-\\xff",eh="\\xac\\xb1\\xd7\\xf7",nh="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ih="\\u2000-\\u206f",oh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xa="A-Z\\xc0-\\xd6\\xd8-\\xde",Aa="\\ufe0e\\ufe0f",Sa=eh+nh+ih+oh,lo="['\u2019]",uh="["+Un+"]",Ea="["+Sa+"]",jn="["+_a+"]",ka="\\d+",ah="["+ba+"]",Ca="["+ma+"]",Oa="[^"+Un+Sa+ka+ba+ma+xa+"]",ho="\\ud83c[\\udffb-\\udfff]",sh="(?:"+jn+"|"+ho+")",Ta="[^"+Un+"]",vo="(?:\\ud83c[\\udde6-\\uddff]){2}",po="[\\ud800-\\udbff][\\udc00-\\udfff]",de="["+xa+"]",Ia="\\u200d",Ra="(?:"+Ca+"|"+Oa+")",ch="(?:"+de+"|"+Oa+")",Da="(?:"+lo+"(?:d|ll|m|re|s|t|ve))?",La="(?:"+lo+"(?:D|LL|M|RE|S|T|VE))?",Ua=sh+"?",ja="["+Aa+"]?",fh="(?:"+Ia+"(?:"+[Ta,vo,po].join("|")+")"+ja+Ua+")*",lh="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fa=ja+Ua+fh,dh="(?:"+[ah,vo,po].join("|")+")"+Fa,vh="(?:"+[Ta+jn+"?",jn,vo,po,uh].join("|")+")",ph=RegExp(lo,"g"),gh=RegExp(jn,"g"),go=RegExp(ho+"(?="+ho+")|"+vh+Fa,"g"),wh=RegExp([de+"?"+Ca+"+"+Da+"(?="+[Ea,de,"$"].join("|")+")",ch+"+"+La+"(?="+[Ea,de+Ra,"$"].join("|")+")",de+"?"+Ra+"+"+Da,de+"+"+La,hh,lh,ka,dh].join("|"),"g"),yh=RegExp("["+Ia+Un+_a+Aa+"]"),_h=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,bh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],mh=-1,et={};et[to]=et[ro]=et[eo]=et[no]=et[io]=et[oo]=et[uo]=et[ao]=et[so]=!0,et[le]=et[Tn]=et[Ke]=et[Me]=et[he]=et[qe]=et[In]=et[Rn]=et[Zt]=et[Ge]=et[dr]=et[We]=et[Yt]=et[He]=et[Je]=!1;var Q={};Q[le]=Q[Tn]=Q[Ke]=Q[he]=Q[Me]=Q[qe]=Q[to]=Q[ro]=Q[eo]=Q[no]=Q[io]=Q[Zt]=Q[Ge]=Q[dr]=Q[We]=Q[Yt]=Q[He]=Q[Dn]=Q[oo]=Q[uo]=Q[ao]=Q[so]=!0,Q[In]=Q[Rn]=Q[Je]=!1;var xh={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ah={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Sh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Eh={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kh=parseFloat,Ch=parseInt,za=typeof global=="object"&&global&&global.Object===Object&&global,Oh=typeof self=="object"&&self&&self.Object===Object&&self,vt=za||Oh||Function("return this")(),wo=typeof o=="object"&&o&&!o.nodeType&&o,Yr=wo&&typeof u=="object"&&u&&!u.nodeType&&u,Ba=Yr&&Yr.exports===wo,yo=Ba&&za.process,Vt=function(){try{var b=Yr&&Yr.require&&Yr.require("util").types;return b||yo&&yo.binding&&yo.binding("util")}catch{}}(),Na=Vt&&Vt.isArrayBuffer,Pa=Vt&&Vt.isDate,Va=Vt&&Vt.isMap,Ma=Vt&&Vt.isRegExp,qa=Vt&&Vt.isSet,Ga=Vt&&Vt.isTypedArray;function Ut(b,S,x){switch(x.length){case 0:return b.call(S);case 1:return b.call(S,x[0]);case 2:return b.call(S,x[0],x[1]);case 3:return b.call(S,x[0],x[1],x[2])}return b.apply(S,x)}function Th(b,S,x,T){for(var F=-1,K=b==null?0:b.length;++F<K;){var ht=b[F];S(T,ht,x(ht),b)}return T}function Mt(b,S){for(var x=-1,T=b==null?0:b.length;++x<T&&S(b[x],x,b)!==!1;);return b}function Ih(b,S){for(var x=b==null?0:b.length;x--&&S(b[x],x,b)!==!1;);return b}function Wa(b,S){for(var x=-1,T=b==null?0:b.length;++x<T;)if(!S(b[x],x,b))return!1;return!0}function Ir(b,S){for(var x=-1,T=b==null?0:b.length,F=0,K=[];++x<T;){var ht=b[x];S(ht,x,b)&&(K[F++]=ht)}return K}function Fn(b,S){var x=b==null?0:b.length;return!!x&&ve(b,S,0)>-1}function _o(b,S,x){for(var T=-1,F=b==null?0:b.length;++T<F;)if(x(S,b[T]))return!0;return!1}function nt(b,S){for(var x=-1,T=b==null?0:b.length,F=Array(T);++x<T;)F[x]=S(b[x],x,b);return F}function Rr(b,S){for(var x=-1,T=S.length,F=b.length;++x<T;)b[F+x]=S[x];return b}function bo(b,S,x,T){var F=-1,K=b==null?0:b.length;for(T&&K&&(x=b[++F]);++F<K;)x=S(x,b[F],F,b);return x}function Rh(b,S,x,T){var F=b==null?0:b.length;for(T&&F&&(x=b[--F]);F--;)x=S(x,b[F],F,b);return x}function mo(b,S){for(var x=-1,T=b==null?0:b.length;++x<T;)if(S(b[x],x,b))return!0;return!1}var Dh=xo("length");function Lh(b){return b.split("")}function Uh(b){return b.match(Ml)||[]}function Ha(b,S,x){var T;return x(b,function(F,K,ht){if(S(F,K,ht))return T=K,!1}),T}function zn(b,S,x,T){for(var F=b.length,K=x+(T?1:-1);T?K--:++K<F;)if(S(b[K],K,b))return K;return-1}function ve(b,S,x){return S===S?Hh(b,S,x):zn(b,Ja,x)}function jh(b,S,x,T){for(var F=x-1,K=b.length;++F<K;)if(T(b[F],S))return F;return-1}function Ja(b){return b!==b}function Ka(b,S){var x=b==null?0:b.length;return x?So(b,S)/x:On}function xo(b){return function(S){return S==null?e:S[b]}}function Ao(b){return function(S){return b==null?e:b[S]}}function $a(b,S,x,T,F){return F(b,function(K,ht,X){x=T?(T=!1,K):S(x,K,ht,X)}),x}function Fh(b,S){var x=b.length;for(b.sort(S);x--;)b[x]=b[x].value;return b}function So(b,S){for(var x,T=-1,F=b.length;++T<F;){var K=S(b[T]);K!==e&&(x=x===e?K:x+K)}return x}function Eo(b,S){for(var x=-1,T=Array(b);++x<b;)T[x]=S(x);return T}function zh(b,S){return nt(S,function(x){return[x,b[x]]})}function Za(b){return b&&b.slice(0,ts(b)+1).replace(fo,"")}function jt(b){return function(S){return b(S)}}function ko(b,S){return nt(S,function(x){return b[x]})}function $e(b,S){return b.has(S)}function Ya(b,S){for(var x=-1,T=b.length;++x<T&&ve(S,b[x],0)>-1;);return x}function Xa(b,S){for(var x=b.length;x--&&ve(S,b[x],0)>-1;);return x}function Bh(b,S){for(var x=b.length,T=0;x--;)b[x]===S&&++T;return T}var Nh=Ao(xh),Ph=Ao(Ah);function Vh(b){return"\\"+Eh[b]}function Mh(b,S){return b==null?e:b[S]}function pe(b){return yh.test(b)}function qh(b){return _h.test(b)}function Gh(b){for(var S,x=[];!(S=b.next()).done;)x.push(S.value);return x}function Co(b){var S=-1,x=Array(b.size);return b.forEach(function(T,F){x[++S]=[F,T]}),x}function Qa(b,S){return function(x){return b(S(x))}}function Dr(b,S){for(var x=-1,T=b.length,F=0,K=[];++x<T;){var ht=b[x];(ht===S||ht===g)&&(b[x]=g,K[F++]=x)}return K}function Bn(b){var S=-1,x=Array(b.size);return b.forEach(function(T){x[++S]=T}),x}function Wh(b){var S=-1,x=Array(b.size);return b.forEach(function(T){x[++S]=[T,T]}),x}function Hh(b,S,x){for(var T=x-1,F=b.length;++T<F;)if(b[T]===S)return T;return-1}function Jh(b,S,x){for(var T=x+1;T--;)if(b[T]===S)return T;return T}function ge(b){return pe(b)?$h(b):Dh(b)}function Xt(b){return pe(b)?Zh(b):Lh(b)}function ts(b){for(var S=b.length;S--&&Bl.test(b.charAt(S)););return S}var Kh=Ao(Sh);function $h(b){for(var S=go.lastIndex=0;go.test(b);)++S;return S}function Zh(b){return b.match(go)||[]}function Yh(b){return b.match(wh)||[]}var Xh=function b(S){S=S==null?vt:Lr.defaults(vt.Object(),S,Lr.pick(vt,bh));var x=S.Array,T=S.Date,F=S.Error,K=S.Function,ht=S.Math,X=S.Object,Oo=S.RegExp,Qh=S.String,qt=S.TypeError,Nn=x.prototype,td=K.prototype,we=X.prototype,Pn=S["__core-js_shared__"],Vn=td.toString,Z=we.hasOwnProperty,rd=0,rs=function(){var t=/[^.]+$/.exec(Pn&&Pn.keys&&Pn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Mn=we.toString,ed=Vn.call(X),nd=vt._,id=Oo("^"+Vn.call(Z).replace(co,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qn=Ba?S.Buffer:e,Ur=S.Symbol,Gn=S.Uint8Array,es=qn?qn.allocUnsafe:e,Wn=Qa(X.getPrototypeOf,X),ns=X.create,is=we.propertyIsEnumerable,Hn=Nn.splice,os=Ur?Ur.isConcatSpreadable:e,Ze=Ur?Ur.iterator:e,Xr=Ur?Ur.toStringTag:e,Jn=function(){try{var t=ne(X,"defineProperty");return t({},"",{}),t}catch{}}(),od=S.clearTimeout!==vt.clearTimeout&&S.clearTimeout,ud=T&&T.now!==vt.Date.now&&T.now,ad=S.setTimeout!==vt.setTimeout&&S.setTimeout,Kn=ht.ceil,$n=ht.floor,To=X.getOwnPropertySymbols,sd=qn?qn.isBuffer:e,us=S.isFinite,cd=Nn.join,fd=Qa(X.keys,X),dt=ht.max,_t=ht.min,ld=T.now,hd=S.parseInt,as=ht.random,dd=Nn.reverse,Io=ne(S,"DataView"),Ye=ne(S,"Map"),Ro=ne(S,"Promise"),ye=ne(S,"Set"),Xe=ne(S,"WeakMap"),Qe=ne(X,"create"),Zn=Xe&&new Xe,_e={},vd=ie(Io),pd=ie(Ye),gd=ie(Ro),wd=ie(ye),yd=ie(Xe),Yn=Ur?Ur.prototype:e,tn=Yn?Yn.valueOf:e,ss=Yn?Yn.toString:e;function d(t){if(at(t)&&!z(t)&&!(t instanceof W)){if(t instanceof Gt)return t;if(Z.call(t,"__wrapped__"))return cc(t)}return new Gt(t)}var be=function(){function t(){}return function(r){if(!it(r))return{};if(ns)return ns(r);t.prototype=r;var n=new t;return t.prototype=e,n}}();function Xn(){}function Gt(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=e}d.templateSettings={escape:Dl,evaluate:Ll,interpolate:wa,variable:"",imports:{_:d}},d.prototype=Xn.prototype,d.prototype.constructor=d,Gt.prototype=be(Xn.prototype),Gt.prototype.constructor=Gt;function W(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=cr,this.__views__=[]}function _d(){var t=new W(this.__wrapped__);return t.__actions__=Tt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Tt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Tt(this.__views__),t}function bd(){if(this.__filtered__){var t=new W(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function md(){var t=this.__wrapped__.value(),r=this.__dir__,n=z(t),s=r<0,l=n?t.length:0,v=Lv(0,l,this.__views__),w=v.start,y=v.end,m=y-w,E=s?y:w-1,k=this.__iteratees__,C=k.length,O=0,I=_t(m,this.__takeCount__);if(!n||!s&&l==m&&I==m)return Ds(t,this.__actions__);var D=[];t:for(;m--&&O<I;){E+=r;for(var V=-1,L=t[E];++V<C;){var q=k[V],J=q.iteratee,Bt=q.type,St=J(L);if(Bt==pl)L=St;else if(!St){if(Bt==ha)continue t;break t}}D[O++]=L}return D}W.prototype=be(Xn.prototype),W.prototype.constructor=W;function Qr(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var s=t[r];this.set(s[0],s[1])}}function xd(){this.__data__=Qe?Qe(null):{},this.size=0}function Ad(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}function Sd(t){var r=this.__data__;if(Qe){var n=r[t];return n===_?e:n}return Z.call(r,t)?r[t]:e}function Ed(t){var r=this.__data__;return Qe?r[t]!==e:Z.call(r,t)}function kd(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Qe&&r===e?_:r,this}Qr.prototype.clear=xd,Qr.prototype.delete=Ad,Qr.prototype.get=Sd,Qr.prototype.has=Ed,Qr.prototype.set=kd;function vr(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var s=t[r];this.set(s[0],s[1])}}function Cd(){this.__data__=[],this.size=0}function Od(t){var r=this.__data__,n=Qn(r,t);if(n<0)return!1;var s=r.length-1;return n==s?r.pop():Hn.call(r,n,1),--this.size,!0}function Td(t){var r=this.__data__,n=Qn(r,t);return n<0?e:r[n][1]}function Id(t){return Qn(this.__data__,t)>-1}function Rd(t,r){var n=this.__data__,s=Qn(n,t);return s<0?(++this.size,n.push([t,r])):n[s][1]=r,this}vr.prototype.clear=Cd,vr.prototype.delete=Od,vr.prototype.get=Td,vr.prototype.has=Id,vr.prototype.set=Rd;function pr(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var s=t[r];this.set(s[0],s[1])}}function Dd(){this.size=0,this.__data__={hash:new Qr,map:new(Ye||vr),string:new Qr}}function Ld(t){var r=li(this,t).delete(t);return this.size-=r?1:0,r}function Ud(t){return li(this,t).get(t)}function jd(t){return li(this,t).has(t)}function Fd(t,r){var n=li(this,t),s=n.size;return n.set(t,r),this.size+=n.size==s?0:1,this}pr.prototype.clear=Dd,pr.prototype.delete=Ld,pr.prototype.get=Ud,pr.prototype.has=jd,pr.prototype.set=Fd;function te(t){var r=-1,n=t==null?0:t.length;for(this.__data__=new pr;++r<n;)this.add(t[r])}function zd(t){return this.__data__.set(t,_),this}function Bd(t){return this.__data__.has(t)}te.prototype.add=te.prototype.push=zd,te.prototype.has=Bd;function Qt(t){var r=this.__data__=new vr(t);this.size=r.size}function Nd(){this.__data__=new vr,this.size=0}function Pd(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}function Vd(t){return this.__data__.get(t)}function Md(t){return this.__data__.has(t)}function qd(t,r){var n=this.__data__;if(n instanceof vr){var s=n.__data__;if(!Ye||s.length<f-1)return s.push([t,r]),this.size=++n.size,this;n=this.__data__=new pr(s)}return n.set(t,r),this.size=n.size,this}Qt.prototype.clear=Nd,Qt.prototype.delete=Pd,Qt.prototype.get=Vd,Qt.prototype.has=Md,Qt.prototype.set=qd;function cs(t,r){var n=z(t),s=!n&&oe(t),l=!n&&!s&&Nr(t),v=!n&&!s&&!l&&Se(t),w=n||s||l||v,y=w?Eo(t.length,Qh):[],m=y.length;for(var E in t)(r||Z.call(t,E))&&!(w&&(E=="length"||l&&(E=="offset"||E=="parent")||v&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||_r(E,m)))&&y.push(E);return y}function fs(t){var r=t.length;return r?t[Mo(0,r-1)]:e}function Gd(t,r){return hi(Tt(t),re(r,0,t.length))}function Wd(t){return hi(Tt(t))}function Do(t,r,n){(n!==e&&!tr(t[r],n)||n===e&&!(r in t))&&gr(t,r,n)}function rn(t,r,n){var s=t[r];(!(Z.call(t,r)&&tr(s,n))||n===e&&!(r in t))&&gr(t,r,n)}function Qn(t,r){for(var n=t.length;n--;)if(tr(t[n][0],r))return n;return-1}function Hd(t,r,n,s){return jr(t,function(l,v,w){r(s,l,n(l),w)}),s}function ls(t,r){return t&&lr(r,pt(r),t)}function Jd(t,r){return t&&lr(r,Rt(r),t)}function gr(t,r,n){r=="__proto__"&&Jn?Jn(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}function Lo(t,r){for(var n=-1,s=r.length,l=x(s),v=t==null;++n<s;)l[n]=v?e:du(t,r[n]);return l}function re(t,r,n){return t===t&&(n!==e&&(t=t<=n?t:n),r!==e&&(t=t>=r?t:r)),t}function Wt(t,r,n,s,l,v){var w,y=r&A,m=r&N,E=r&H;if(n&&(w=l?n(t,s,l,v):n(t)),w!==e)return w;if(!it(t))return t;var k=z(t);if(k){if(w=jv(t),!y)return Tt(t,w)}else{var C=bt(t),O=C==Rn||C==da;if(Nr(t))return js(t,y);if(C==dr||C==le||O&&!l){if(w=m||O?{}:tc(t),!y)return m?Sv(t,Jd(w,t)):Av(t,ls(w,t))}else{if(!Q[C])return l?t:{};w=Fv(t,C,y)}}v||(v=new Qt);var I=v.get(t);if(I)return I;v.set(t,w),Tc(t)?t.forEach(function(L){w.add(Wt(L,r,n,L,t,v))}):Cc(t)&&t.forEach(function(L,q){w.set(q,Wt(L,r,n,q,t,v))});var D=E?m?Qo:Xo:m?Rt:pt,V=k?e:D(t);return Mt(V||t,function(L,q){V&&(q=L,L=t[q]),rn(w,q,Wt(L,r,n,q,t,v))}),w}function Kd(t){var r=pt(t);return function(n){return hs(n,t,r)}}function hs(t,r,n){var s=n.length;if(t==null)return!s;for(t=X(t);s--;){var l=n[s],v=r[l],w=t[l];if(w===e&&!(l in t)||!v(w))return!1}return!0}function ds(t,r,n){if(typeof t!="function")throw new qt(h);return cn(function(){t.apply(e,n)},r)}function en(t,r,n,s){var l=-1,v=Fn,w=!0,y=t.length,m=[],E=r.length;if(!y)return m;n&&(r=nt(r,jt(n))),s?(v=_o,w=!1):r.length>=f&&(v=$e,w=!1,r=new te(r));t:for(;++l<y;){var k=t[l],C=n==null?k:n(k);if(k=s||k!==0?k:0,w&&C===C){for(var O=E;O--;)if(r[O]===C)continue t;m.push(k)}else v(r,C,s)||m.push(k)}return m}var jr=Ps(fr),vs=Ps(jo,!0);function $d(t,r){var n=!0;return jr(t,function(s,l,v){return n=!!r(s,l,v),n}),n}function ti(t,r,n){for(var s=-1,l=t.length;++s<l;){var v=t[s],w=r(v);if(w!=null&&(y===e?w===w&&!zt(w):n(w,y)))var y=w,m=v}return m}function Zd(t,r,n,s){var l=t.length;for(n=P(n),n<0&&(n=-n>l?0:l+n),s=s===e||s>l?l:P(s),s<0&&(s+=l),s=n>s?0:Rc(s);n<s;)t[n++]=r;return t}function ps(t,r){var n=[];return jr(t,function(s,l,v){r(s,l,v)&&n.push(s)}),n}function wt(t,r,n,s,l){var v=-1,w=t.length;for(n||(n=Bv),l||(l=[]);++v<w;){var y=t[v];r>0&&n(y)?r>1?wt(y,r-1,n,s,l):Rr(l,y):s||(l[l.length]=y)}return l}var Uo=Vs(),gs=Vs(!0);function fr(t,r){return t&&Uo(t,r,pt)}function jo(t,r){return t&&gs(t,r,pt)}function ri(t,r){return Ir(r,function(n){return br(t[n])})}function ee(t,r){r=zr(r,t);for(var n=0,s=r.length;t!=null&&n<s;)t=t[hr(r[n++])];return n&&n==s?t:e}function ws(t,r,n){var s=r(t);return z(t)?s:Rr(s,n(t))}function xt(t){return t==null?t===e?El:Al:Xr&&Xr in X(t)?Dv(t):Wv(t)}function Fo(t,r){return t>r}function Yd(t,r){return t!=null&&Z.call(t,r)}function Xd(t,r){return t!=null&&r in X(t)}function Qd(t,r,n){return t>=_t(r,n)&&t<dt(r,n)}function zo(t,r,n){for(var s=n?_o:Fn,l=t[0].length,v=t.length,w=v,y=x(v),m=1/0,E=[];w--;){var k=t[w];w&&r&&(k=nt(k,jt(r))),m=_t(k.length,m),y[w]=!n&&(r||l>=120&&k.length>=120)?new te(w&&k):e}k=t[0];var C=-1,O=y[0];t:for(;++C<l&&E.length<m;){var I=k[C],D=r?r(I):I;if(I=n||I!==0?I:0,!(O?$e(O,D):s(E,D,n))){for(w=v;--w;){var V=y[w];if(!(V?$e(V,D):s(t[w],D,n)))continue t}O&&O.push(D),E.push(I)}}return E}function tv(t,r,n,s){return fr(t,function(l,v,w){r(s,n(l),v,w)}),s}function nn(t,r,n){r=zr(r,t),t=ic(t,r);var s=t==null?t:t[hr(Jt(r))];return s==null?e:Ut(s,t,n)}function ys(t){return at(t)&&xt(t)==le}function rv(t){return at(t)&&xt(t)==Ke}function ev(t){return at(t)&&xt(t)==qe}function on(t,r,n,s,l){return t===r?!0:t==null||r==null||!at(t)&&!at(r)?t!==t&&r!==r:nv(t,r,n,s,on,l)}function nv(t,r,n,s,l,v){var w=z(t),y=z(r),m=w?Tn:bt(t),E=y?Tn:bt(r);m=m==le?dr:m,E=E==le?dr:E;var k=m==dr,C=E==dr,O=m==E;if(O&&Nr(t)){if(!Nr(r))return!1;w=!0,k=!1}if(O&&!k)return v||(v=new Qt),w||Se(t)?Ys(t,r,n,s,l,v):Iv(t,r,m,n,s,l,v);if(!(n&j)){var I=k&&Z.call(t,"__wrapped__"),D=C&&Z.call(r,"__wrapped__");if(I||D){var V=I?t.value():t,L=D?r.value():r;return v||(v=new Qt),l(V,L,n,s,v)}}return O?(v||(v=new Qt),Rv(t,r,n,s,l,v)):!1}function iv(t){return at(t)&&bt(t)==Zt}function Bo(t,r,n,s){var l=n.length,v=l,w=!s;if(t==null)return!v;for(t=X(t);l--;){var y=n[l];if(w&&y[2]?y[1]!==t[y[0]]:!(y[0]in t))return!1}for(;++l<v;){y=n[l];var m=y[0],E=t[m],k=y[1];if(w&&y[2]){if(E===e&&!(m in t))return!1}else{var C=new Qt;if(s)var O=s(E,k,m,t,r,C);if(!(O===e?on(k,E,j|G,s,C):O))return!1}}return!0}function _s(t){if(!it(t)||Pv(t))return!1;var r=br(t)?id:Kl;return r.test(ie(t))}function ov(t){return at(t)&&xt(t)==We}function uv(t){return at(t)&&bt(t)==Yt}function av(t){return at(t)&&yi(t.length)&&!!et[xt(t)]}function bs(t){return typeof t=="function"?t:t==null?Dt:typeof t=="object"?z(t)?As(t[0],t[1]):xs(t):Mc(t)}function No(t){if(!sn(t))return fd(t);var r=[];for(var n in X(t))Z.call(t,n)&&n!="constructor"&&r.push(n);return r}function sv(t){if(!it(t))return Gv(t);var r=sn(t),n=[];for(var s in t)s=="constructor"&&(r||!Z.call(t,s))||n.push(s);return n}function Po(t,r){return t<r}function ms(t,r){var n=-1,s=It(t)?x(t.length):[];return jr(t,function(l,v,w){s[++n]=r(l,v,w)}),s}function xs(t){var r=ru(t);return r.length==1&&r[0][2]?ec(r[0][0],r[0][1]):function(n){return n===t||Bo(n,t,r)}}function As(t,r){return nu(t)&&rc(r)?ec(hr(t),r):function(n){var s=du(n,t);return s===e&&s===r?vu(n,t):on(r,s,j|G)}}function ei(t,r,n,s,l){t!==r&&Uo(r,function(v,w){if(l||(l=new Qt),it(v))cv(t,r,w,n,ei,s,l);else{var y=s?s(ou(t,w),v,w+"",t,r,l):e;y===e&&(y=v),Do(t,w,y)}},Rt)}function cv(t,r,n,s,l,v,w){var y=ou(t,n),m=ou(r,n),E=w.get(m);if(E){Do(t,n,E);return}var k=v?v(y,m,n+"",t,r,w):e,C=k===e;if(C){var O=z(m),I=!O&&Nr(m),D=!O&&!I&&Se(m);k=m,O||I||D?z(y)?k=y:ct(y)?k=Tt(y):I?(C=!1,k=js(m,!0)):D?(C=!1,k=Fs(m,!0)):k=[]:fn(m)||oe(m)?(k=y,oe(y)?k=Dc(y):(!it(y)||br(y))&&(k=tc(m))):C=!1}C&&(w.set(m,k),l(k,m,s,v,w),w.delete(m)),Do(t,n,k)}function Ss(t,r){var n=t.length;if(n)return r+=r<0?n:0,_r(r,n)?t[r]:e}function Es(t,r,n){r.length?r=nt(r,function(v){return z(v)?function(w){return ee(w,v.length===1?v[0]:v)}:v}):r=[Dt];var s=-1;r=nt(r,jt(R()));var l=ms(t,function(v,w,y){var m=nt(r,function(E){return E(v)});return{criteria:m,index:++s,value:v}});return Fh(l,function(v,w){return xv(v,w,n)})}function fv(t,r){return ks(t,r,function(n,s){return vu(t,s)})}function ks(t,r,n){for(var s=-1,l=r.length,v={};++s<l;){var w=r[s],y=ee(t,w);n(y,w)&&un(v,zr(w,t),y)}return v}function lv(t){return function(r){return ee(r,t)}}function Vo(t,r,n,s){var l=s?jh:ve,v=-1,w=r.length,y=t;for(t===r&&(r=Tt(r)),n&&(y=nt(t,jt(n)));++v<w;)for(var m=0,E=r[v],k=n?n(E):E;(m=l(y,k,m,s))>-1;)y!==t&&Hn.call(y,m,1),Hn.call(t,m,1);return t}function Cs(t,r){for(var n=t?r.length:0,s=n-1;n--;){var l=r[n];if(n==s||l!==v){var v=l;_r(l)?Hn.call(t,l,1):Wo(t,l)}}return t}function Mo(t,r){return t+$n(as()*(r-t+1))}function hv(t,r,n,s){for(var l=-1,v=dt(Kn((r-t)/(n||1)),0),w=x(v);v--;)w[s?v:++l]=t,t+=n;return w}function qo(t,r){var n="";if(!t||r<1||r>Tr)return n;do r%2&&(n+=t),r=$n(r/2),r&&(t+=t);while(r);return n}function M(t,r){return uu(nc(t,r,Dt),t+"")}function dv(t){return fs(Ee(t))}function vv(t,r){var n=Ee(t);return hi(n,re(r,0,n.length))}function un(t,r,n,s){if(!it(t))return t;r=zr(r,t);for(var l=-1,v=r.length,w=v-1,y=t;y!=null&&++l<v;){var m=hr(r[l]),E=n;if(m==="__proto__"||m==="constructor"||m==="prototype")return t;if(l!=w){var k=y[m];E=s?s(k,m,y):e,E===e&&(E=it(k)?k:_r(r[l+1])?[]:{})}rn(y,m,E),y=y[m]}return t}var Os=Zn?function(t,r){return Zn.set(t,r),t}:Dt,pv=Jn?function(t,r){return Jn(t,"toString",{configurable:!0,enumerable:!1,value:gu(r),writable:!0})}:Dt;function gv(t){return hi(Ee(t))}function Ht(t,r,n){var s=-1,l=t.length;r<0&&(r=-r>l?0:l+r),n=n>l?l:n,n<0&&(n+=l),l=r>n?0:n-r>>>0,r>>>=0;for(var v=x(l);++s<l;)v[s]=t[s+r];return v}function wv(t,r){var n;return jr(t,function(s,l,v){return n=r(s,l,v),!n}),!!n}function ni(t,r,n){var s=0,l=t==null?s:t.length;if(typeof r=="number"&&r===r&&l<=_l){for(;s<l;){var v=s+l>>>1,w=t[v];w!==null&&!zt(w)&&(n?w<=r:w<r)?s=v+1:l=v}return l}return Go(t,r,Dt,n)}function Go(t,r,n,s){var l=0,v=t==null?0:t.length;if(v===0)return 0;r=n(r);for(var w=r!==r,y=r===null,m=zt(r),E=r===e;l<v;){var k=$n((l+v)/2),C=n(t[k]),O=C!==e,I=C===null,D=C===C,V=zt(C);if(w)var L=s||D;else E?L=D&&(s||O):y?L=D&&O&&(s||!I):m?L=D&&O&&!I&&(s||!V):I||V?L=!1:L=s?C<=r:C<r;L?l=k+1:v=k}return _t(v,yl)}function Ts(t,r){for(var n=-1,s=t.length,l=0,v=[];++n<s;){var w=t[n],y=r?r(w):w;if(!n||!tr(y,m)){var m=y;v[l++]=w===0?0:w}}return v}function Is(t){return typeof t=="number"?t:zt(t)?On:+t}function Ft(t){if(typeof t=="string")return t;if(z(t))return nt(t,Ft)+"";if(zt(t))return ss?ss.call(t):"";var r=t+"";return r=="0"&&1/t==-Zr?"-0":r}function Fr(t,r,n){var s=-1,l=Fn,v=t.length,w=!0,y=[],m=y;if(n)w=!1,l=_o;else if(v>=f){var E=r?null:Ov(t);if(E)return Bn(E);w=!1,l=$e,m=new te}else m=r?[]:y;t:for(;++s<v;){var k=t[s],C=r?r(k):k;if(k=n||k!==0?k:0,w&&C===C){for(var O=m.length;O--;)if(m[O]===C)continue t;r&&m.push(C),y.push(k)}else l(m,C,n)||(m!==y&&m.push(C),y.push(k))}return y}function Wo(t,r){return r=zr(r,t),t=ic(t,r),t==null||delete t[hr(Jt(r))]}function Rs(t,r,n,s){return un(t,r,n(ee(t,r)),s)}function ii(t,r,n,s){for(var l=t.length,v=s?l:-1;(s?v--:++v<l)&&r(t[v],v,t););return n?Ht(t,s?0:v,s?v+1:l):Ht(t,s?v+1:0,s?l:v)}function Ds(t,r){var n=t;return n instanceof W&&(n=n.value()),bo(r,function(s,l){return l.func.apply(l.thisArg,Rr([s],l.args))},n)}function Ho(t,r,n){var s=t.length;if(s<2)return s?Fr(t[0]):[];for(var l=-1,v=x(s);++l<s;)for(var w=t[l],y=-1;++y<s;)y!=l&&(v[l]=en(v[l]||w,t[y],r,n));return Fr(wt(v,1),r,n)}function Ls(t,r,n){for(var s=-1,l=t.length,v=r.length,w={};++s<l;){var y=s<v?r[s]:e;n(w,t[s],y)}return w}function Jo(t){return ct(t)?t:[]}function Ko(t){return typeof t=="function"?t:Dt}function zr(t,r){return z(t)?t:nu(t,r)?[t]:sc($(t))}var yv=M;function Br(t,r,n){var s=t.length;return n=n===e?s:n,!r&&n>=s?t:Ht(t,r,n)}var Us=od||function(t){return vt.clearTimeout(t)};function js(t,r){if(r)return t.slice();var n=t.length,s=es?es(n):new t.constructor(n);return t.copy(s),s}function $o(t){var r=new t.constructor(t.byteLength);return new Gn(r).set(new Gn(t)),r}function _v(t,r){var n=r?$o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function bv(t){var r=new t.constructor(t.source,ya.exec(t));return r.lastIndex=t.lastIndex,r}function mv(t){return tn?X(tn.call(t)):{}}function Fs(t,r){var n=r?$o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function zs(t,r){if(t!==r){var n=t!==e,s=t===null,l=t===t,v=zt(t),w=r!==e,y=r===null,m=r===r,E=zt(r);if(!y&&!E&&!v&&t>r||v&&w&&m&&!y&&!E||s&&w&&m||!n&&m||!l)return 1;if(!s&&!v&&!E&&t<r||E&&n&&l&&!s&&!v||y&&n&&l||!w&&l||!m)return-1}return 0}function xv(t,r,n){for(var s=-1,l=t.criteria,v=r.criteria,w=l.length,y=n.length;++s<w;){var m=zs(l[s],v[s]);if(m){if(s>=y)return m;var E=n[s];return m*(E=="desc"?-1:1)}}return t.index-r.index}function Bs(t,r,n,s){for(var l=-1,v=t.length,w=n.length,y=-1,m=r.length,E=dt(v-w,0),k=x(m+E),C=!s;++y<m;)k[y]=r[y];for(;++l<w;)(C||l<v)&&(k[n[l]]=t[l]);for(;E--;)k[y++]=t[l++];return k}function Ns(t,r,n,s){for(var l=-1,v=t.length,w=-1,y=n.length,m=-1,E=r.length,k=dt(v-y,0),C=x(k+E),O=!s;++l<k;)C[l]=t[l];for(var I=l;++m<E;)C[I+m]=r[m];for(;++w<y;)(O||l<v)&&(C[I+n[w]]=t[l++]);return C}function Tt(t,r){var n=-1,s=t.length;for(r||(r=x(s));++n<s;)r[n]=t[n];return r}function lr(t,r,n,s){var l=!n;n||(n={});for(var v=-1,w=r.length;++v<w;){var y=r[v],m=s?s(n[y],t[y],y,n,t):e;m===e&&(m=t[y]),l?gr(n,y,m):rn(n,y,m)}return n}function Av(t,r){return lr(t,eu(t),r)}function Sv(t,r){return lr(t,Xs(t),r)}function oi(t,r){return function(n,s){var l=z(n)?Th:Hd,v=r?r():{};return l(n,t,R(s,2),v)}}function me(t){return M(function(r,n){var s=-1,l=n.length,v=l>1?n[l-1]:e,w=l>2?n[2]:e;for(v=t.length>3&&typeof v=="function"?(l--,v):e,w&&At(n[0],n[1],w)&&(v=l<3?e:v,l=1),r=X(r);++s<l;){var y=n[s];y&&t(r,y,s,v)}return r})}function Ps(t,r){return function(n,s){if(n==null)return n;if(!It(n))return t(n,s);for(var l=n.length,v=r?l:-1,w=X(n);(r?v--:++v<l)&&s(w[v],v,w)!==!1;);return n}}function Vs(t){return function(r,n,s){for(var l=-1,v=X(r),w=s(r),y=w.length;y--;){var m=w[t?y:++l];if(n(v[m],m,v)===!1)break}return r}}function Ev(t,r,n){var s=r&B,l=an(t);function v(){var w=this&&this!==vt&&this instanceof v?l:t;return w.apply(s?n:this,arguments)}return v}function Ms(t){return function(r){r=$(r);var n=pe(r)?Xt(r):e,s=n?n[0]:r.charAt(0),l=n?Br(n,1).join(""):r.slice(1);return s[t]()+l}}function xe(t){return function(r){return bo(Pc(Nc(r).replace(ph,"")),t,"")}}function an(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var n=be(t.prototype),s=t.apply(n,r);return it(s)?s:n}}function kv(t,r,n){var s=an(t);function l(){for(var v=arguments.length,w=x(v),y=v,m=Ae(l);y--;)w[y]=arguments[y];var E=v<3&&w[0]!==m&&w[v-1]!==m?[]:Dr(w,m);if(v-=E.length,v<n)return Js(t,r,ui,l.placeholder,e,w,E,e,e,n-v);var k=this&&this!==vt&&this instanceof l?s:t;return Ut(k,this,w)}return l}function qs(t){return function(r,n,s){var l=X(r);if(!It(r)){var v=R(n,3);r=pt(r),n=function(y){return v(l[y],y,l)}}var w=t(r,n,s);return w>-1?l[v?r[w]:w]:e}}function Gs(t){return yr(function(r){var n=r.length,s=n,l=Gt.prototype.thru;for(t&&r.reverse();s--;){var v=r[s];if(typeof v!="function")throw new qt(h);if(l&&!w&&fi(v)=="wrapper")var w=new Gt([],!0)}for(s=w?s:n;++s<n;){v=r[s];var y=fi(v),m=y=="wrapper"?tu(v):e;m&&iu(m[0])&&m[1]==(Pt|lt|Lt|$r)&&!m[4].length&&m[9]==1?w=w[fi(m[0])].apply(w,m[3]):w=v.length==1&&iu(v)?w[y]():w.thru(v)}return function(){var E=arguments,k=E[0];if(w&&E.length==1&&z(k))return w.plant(k).value();for(var C=0,O=n?r[C].apply(this,E):k;++C<n;)O=r[C].call(this,O);return O}})}function ui(t,r,n,s,l,v,w,y,m,E){var k=r&Pt,C=r&B,O=r&yt,I=r&(lt|ar),D=r&Qi,V=O?e:an(t);function L(){for(var q=arguments.length,J=x(q),Bt=q;Bt--;)J[Bt]=arguments[Bt];if(I)var St=Ae(L),Nt=Bh(J,St);if(s&&(J=Bs(J,s,l,I)),v&&(J=Ns(J,v,w,I)),q-=Nt,I&&q<E){var ft=Dr(J,St);return Js(t,r,ui,L.placeholder,n,J,ft,y,m,E-q)}var rr=C?n:this,xr=O?rr[t]:t;return q=J.length,y?J=Hv(J,y):D&&q>1&&J.reverse(),k&&m<q&&(J.length=m),this&&this!==vt&&this instanceof L&&(xr=V||an(xr)),xr.apply(rr,J)}return L}function Ws(t,r){return function(n,s){return tv(n,t,r(s),{})}}function ai(t,r){return function(n,s){var l;if(n===e&&s===e)return r;if(n!==e&&(l=n),s!==e){if(l===e)return s;typeof n=="string"||typeof s=="string"?(n=Ft(n),s=Ft(s)):(n=Is(n),s=Is(s)),l=t(n,s)}return l}}function Zo(t){return yr(function(r){return r=nt(r,jt(R())),M(function(n){var s=this;return t(r,function(l){return Ut(l,s,n)})})})}function si(t,r){r=r===e?" ":Ft(r);var n=r.length;if(n<2)return n?qo(r,t):r;var s=qo(r,Kn(t/ge(r)));return pe(r)?Br(Xt(s),0,t).join(""):s.slice(0,t)}function Cv(t,r,n,s){var l=r&B,v=an(t);function w(){for(var y=-1,m=arguments.length,E=-1,k=s.length,C=x(k+m),O=this&&this!==vt&&this instanceof w?v:t;++E<k;)C[E]=s[E];for(;m--;)C[E++]=arguments[++y];return Ut(O,l?n:this,C)}return w}function Hs(t){return function(r,n,s){return s&&typeof s!="number"&&At(r,n,s)&&(n=s=e),r=mr(r),n===e?(n=r,r=0):n=mr(n),s=s===e?r<n?1:-1:mr(s),hv(r,n,s,t)}}function ci(t){return function(r,n){return typeof r=="string"&&typeof n=="string"||(r=Kt(r),n=Kt(n)),t(r,n)}}function Js(t,r,n,s,l,v,w,y,m,E){var k=r&lt,C=k?w:e,O=k?e:w,I=k?v:e,D=k?e:v;r|=k?Lt:sr,r&=~(k?sr:Lt),r&$t||(r&=~(B|yt));var V=[t,r,l,I,C,D,O,y,m,E],L=n.apply(e,V);return iu(t)&&oc(L,V),L.placeholder=s,uc(L,t,r)}function Yo(t){var r=ht[t];return function(n,s){if(n=Kt(n),s=s==null?0:_t(P(s),292),s&&us(n)){var l=($(n)+"e").split("e"),v=r(l[0]+"e"+(+l[1]+s));return l=($(v)+"e").split("e"),+(l[0]+"e"+(+l[1]-s))}return r(n)}}var Ov=ye&&1/Bn(new ye([,-0]))[1]==Zr?function(t){return new ye(t)}:_u;function Ks(t){return function(r){var n=bt(r);return n==Zt?Co(r):n==Yt?Wh(r):zh(r,t(r))}}function wr(t,r,n,s,l,v,w,y){var m=r&yt;if(!m&&typeof t!="function")throw new qt(h);var E=s?s.length:0;if(E||(r&=~(Lt|sr),s=l=e),w=w===e?w:dt(P(w),0),y=y===e?y:P(y),E-=l?l.length:0,r&sr){var k=s,C=l;s=l=e}var O=m?e:tu(t),I=[t,r,n,s,l,k,C,v,w,y];if(O&&qv(I,O),t=I[0],r=I[1],n=I[2],s=I[3],l=I[4],y=I[9]=I[9]===e?m?0:t.length:dt(I[9]-E,0),!y&&r&(lt|ar)&&(r&=~(lt|ar)),!r||r==B)var D=Ev(t,r,n);else r==lt||r==ar?D=kv(t,r,y):(r==Lt||r==(B|Lt))&&!l.length?D=Cv(t,r,n,s):D=ui.apply(e,I);var V=O?Os:oc;return uc(V(D,I),t,r)}function $s(t,r,n,s){return t===e||tr(t,we[n])&&!Z.call(s,n)?r:t}function Zs(t,r,n,s,l,v){return it(t)&&it(r)&&(v.set(r,t),ei(t,r,e,Zs,v),v.delete(r)),t}function Tv(t){return fn(t)?e:t}function Ys(t,r,n,s,l,v){var w=n&j,y=t.length,m=r.length;if(y!=m&&!(w&&m>y))return!1;var E=v.get(t),k=v.get(r);if(E&&k)return E==r&&k==t;var C=-1,O=!0,I=n&G?new te:e;for(v.set(t,r),v.set(r,t);++C<y;){var D=t[C],V=r[C];if(s)var L=w?s(V,D,C,r,t,v):s(D,V,C,t,r,v);if(L!==e){if(L)continue;O=!1;break}if(I){if(!mo(r,function(q,J){if(!$e(I,J)&&(D===q||l(D,q,n,s,v)))return I.push(J)})){O=!1;break}}else if(!(D===V||l(D,V,n,s,v))){O=!1;break}}return v.delete(t),v.delete(r),O}function Iv(t,r,n,s,l,v,w){switch(n){case he:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case Ke:return!(t.byteLength!=r.byteLength||!v(new Gn(t),new Gn(r)));case Me:case qe:case Ge:return tr(+t,+r);case In:return t.name==r.name&&t.message==r.message;case We:case He:return t==r+"";case Zt:var y=Co;case Yt:var m=s&j;if(y||(y=Bn),t.size!=r.size&&!m)return!1;var E=w.get(t);if(E)return E==r;s|=G,w.set(t,r);var k=Ys(y(t),y(r),s,l,v,w);return w.delete(t),k;case Dn:if(tn)return tn.call(t)==tn.call(r)}return!1}function Rv(t,r,n,s,l,v){var w=n&j,y=Xo(t),m=y.length,E=Xo(r),k=E.length;if(m!=k&&!w)return!1;for(var C=m;C--;){var O=y[C];if(!(w?O in r:Z.call(r,O)))return!1}var I=v.get(t),D=v.get(r);if(I&&D)return I==r&&D==t;var V=!0;v.set(t,r),v.set(r,t);for(var L=w;++C<m;){O=y[C];var q=t[O],J=r[O];if(s)var Bt=w?s(J,q,O,r,t,v):s(q,J,O,t,r,v);if(!(Bt===e?q===J||l(q,J,n,s,v):Bt)){V=!1;break}L||(L=O=="constructor")}if(V&&!L){var St=t.constructor,Nt=r.constructor;St!=Nt&&"constructor"in t&&"constructor"in r&&!(typeof St=="function"&&St instanceof St&&typeof Nt=="function"&&Nt instanceof Nt)&&(V=!1)}return v.delete(t),v.delete(r),V}function yr(t){return uu(nc(t,e,hc),t+"")}function Xo(t){return ws(t,pt,eu)}function Qo(t){return ws(t,Rt,Xs)}var tu=Zn?function(t){return Zn.get(t)}:_u;function fi(t){for(var r=t.name+"",n=_e[r],s=Z.call(_e,r)?n.length:0;s--;){var l=n[s],v=l.func;if(v==null||v==t)return l.name}return r}function Ae(t){var r=Z.call(d,"placeholder")?d:t;return r.placeholder}function R(){var t=d.iteratee||wu;return t=t===wu?bs:t,arguments.length?t(arguments[0],arguments[1]):t}function li(t,r){var n=t.__data__;return Nv(r)?n[typeof r=="string"?"string":"hash"]:n.map}function ru(t){for(var r=pt(t),n=r.length;n--;){var s=r[n],l=t[s];r[n]=[s,l,rc(l)]}return r}function ne(t,r){var n=Mh(t,r);return _s(n)?n:e}function Dv(t){var r=Z.call(t,Xr),n=t[Xr];try{t[Xr]=e;var s=!0}catch{}var l=Mn.call(t);return s&&(r?t[Xr]=n:delete t[Xr]),l}var eu=To?function(t){return t==null?[]:(t=X(t),Ir(To(t),function(r){return is.call(t,r)}))}:bu,Xs=To?function(t){for(var r=[];t;)Rr(r,eu(t)),t=Wn(t);return r}:bu,bt=xt;(Io&&bt(new Io(new ArrayBuffer(1)))!=he||Ye&&bt(new Ye)!=Zt||Ro&&bt(Ro.resolve())!=va||ye&&bt(new ye)!=Yt||Xe&&bt(new Xe)!=Je)&&(bt=function(t){var r=xt(t),n=r==dr?t.constructor:e,s=n?ie(n):"";if(s)switch(s){case vd:return he;case pd:return Zt;case gd:return va;case wd:return Yt;case yd:return Je}return r});function Lv(t,r,n){for(var s=-1,l=n.length;++s<l;){var v=n[s],w=v.size;switch(v.type){case"drop":t+=w;break;case"dropRight":r-=w;break;case"take":r=_t(r,t+w);break;case"takeRight":t=dt(t,r-w);break}}return{start:t,end:r}}function Uv(t){var r=t.match(Pl);return r?r[1].split(Vl):[]}function Qs(t,r,n){r=zr(r,t);for(var s=-1,l=r.length,v=!1;++s<l;){var w=hr(r[s]);if(!(v=t!=null&&n(t,w)))break;t=t[w]}return v||++s!=l?v:(l=t==null?0:t.length,!!l&&yi(l)&&_r(w,l)&&(z(t)||oe(t)))}function jv(t){var r=t.length,n=new t.constructor(r);return r&&typeof t[0]=="string"&&Z.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function tc(t){return typeof t.constructor=="function"&&!sn(t)?be(Wn(t)):{}}function Fv(t,r,n){var s=t.constructor;switch(r){case Ke:return $o(t);case Me:case qe:return new s(+t);case he:return _v(t,n);case to:case ro:case eo:case no:case io:case oo:case uo:case ao:case so:return Fs(t,n);case Zt:return new s;case Ge:case He:return new s(t);case We:return bv(t);case Yt:return new s;case Dn:return mv(t)}}function zv(t,r){var n=r.length;if(!n)return t;var s=n-1;return r[s]=(n>1?"& ":"")+r[s],r=r.join(n>2?", ":" "),t.replace(Nl,`{
/* [wrapped with `+r+`] */
`)}function Bv(t){return z(t)||oe(t)||!!(os&&t&&t[os])}function _r(t,r){var n=typeof t;return r=r??Tr,!!r&&(n=="number"||n!="symbol"&&Zl.test(t))&&t>-1&&t%1==0&&t<r}function At(t,r,n){if(!it(n))return!1;var s=typeof r;return(s=="number"?It(n)&&_r(r,n.length):s=="string"&&r in n)?tr(n[r],t):!1}function nu(t,r){if(z(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||zt(t)?!0:jl.test(t)||!Ul.test(t)||r!=null&&t in X(r)}function Nv(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}function iu(t){var r=fi(t),n=d[r];if(typeof n!="function"||!(r in W.prototype))return!1;if(t===n)return!0;var s=tu(n);return!!s&&t===s[0]}function Pv(t){return!!rs&&rs in t}var Vv=Pn?br:mu;function sn(t){var r=t&&t.constructor,n=typeof r=="function"&&r.prototype||we;return t===n}function rc(t){return t===t&&!it(t)}function ec(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==e||t in X(n))}}function Mv(t){var r=gi(t,function(s){return n.size===a&&n.clear(),s}),n=r.cache;return r}function qv(t,r){var n=t[1],s=r[1],l=n|s,v=l<(B|yt|Pt),w=s==Pt&&n==lt||s==Pt&&n==$r&&t[7].length<=r[8]||s==(Pt|$r)&&r[7].length<=r[8]&&n==lt;if(!(v||w))return t;s&B&&(t[2]=r[2],l|=n&B?0:$t);var y=r[3];if(y){var m=t[3];t[3]=m?Bs(m,y,r[4]):y,t[4]=m?Dr(t[3],g):r[4]}return y=r[5],y&&(m=t[5],t[5]=m?Ns(m,y,r[6]):y,t[6]=m?Dr(t[5],g):r[6]),y=r[7],y&&(t[7]=y),s&Pt&&(t[8]=t[8]==null?r[8]:_t(t[8],r[8])),t[9]==null&&(t[9]=r[9]),t[0]=r[0],t[1]=l,t}function Gv(t){var r=[];if(t!=null)for(var n in X(t))r.push(n);return r}function Wv(t){return Mn.call(t)}function nc(t,r,n){return r=dt(r===e?t.length-1:r,0),function(){for(var s=arguments,l=-1,v=dt(s.length-r,0),w=x(v);++l<v;)w[l]=s[r+l];l=-1;for(var y=x(r+1);++l<r;)y[l]=s[l];return y[r]=n(w),Ut(t,this,y)}}function ic(t,r){return r.length<2?t:ee(t,Ht(r,0,-1))}function Hv(t,r){for(var n=t.length,s=_t(r.length,n),l=Tt(t);s--;){var v=r[s];t[s]=_r(v,n)?l[v]:e}return t}function ou(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}var oc=ac(Os),cn=ad||function(t,r){return vt.setTimeout(t,r)},uu=ac(pv);function uc(t,r,n){var s=r+"";return uu(t,zv(s,Jv(Uv(s),n)))}function ac(t){var r=0,n=0;return function(){var s=ld(),l=vl-(s-n);if(n=s,l>0){if(++r>=dl)return arguments[0]}else r=0;return t.apply(e,arguments)}}function hi(t,r){var n=-1,s=t.length,l=s-1;for(r=r===e?s:r;++n<r;){var v=Mo(n,l),w=t[v];t[v]=t[n],t[n]=w}return t.length=r,t}var sc=Mv(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(Fl,function(n,s,l,v){r.push(l?v.replace(Gl,"$1"):s||n)}),r});function hr(t){if(typeof t=="string"||zt(t))return t;var r=t+"";return r=="0"&&1/t==-Zr?"-0":r}function ie(t){if(t!=null){try{return Vn.call(t)}catch{}try{return t+""}catch{}}return""}function Jv(t,r){return Mt(bl,function(n){var s="_."+n[0];r&n[1]&&!Fn(t,s)&&t.push(s)}),t.sort()}function cc(t){if(t instanceof W)return t.clone();var r=new Gt(t.__wrapped__,t.__chain__);return r.__actions__=Tt(t.__actions__),r.__index__=t.__index__,r.__values__=t.__values__,r}function Kv(t,r,n){(n?At(t,r,n):r===e)?r=1:r=dt(P(r),0);var s=t==null?0:t.length;if(!s||r<1)return[];for(var l=0,v=0,w=x(Kn(s/r));l<s;)w[v++]=Ht(t,l,l+=r);return w}function $v(t){for(var r=-1,n=t==null?0:t.length,s=0,l=[];++r<n;){var v=t[r];v&&(l[s++]=v)}return l}function Zv(){var t=arguments.length;if(!t)return[];for(var r=x(t-1),n=arguments[0],s=t;s--;)r[s-1]=arguments[s];return Rr(z(n)?Tt(n):[n],wt(r,1))}var Yv=M(function(t,r){return ct(t)?en(t,wt(r,1,ct,!0)):[]}),Xv=M(function(t,r){var n=Jt(r);return ct(n)&&(n=e),ct(t)?en(t,wt(r,1,ct,!0),R(n,2)):[]}),Qv=M(function(t,r){var n=Jt(r);return ct(n)&&(n=e),ct(t)?en(t,wt(r,1,ct,!0),e,n):[]});function t0(t,r,n){var s=t==null?0:t.length;return s?(r=n||r===e?1:P(r),Ht(t,r<0?0:r,s)):[]}function r0(t,r,n){var s=t==null?0:t.length;return s?(r=n||r===e?1:P(r),r=s-r,Ht(t,0,r<0?0:r)):[]}function e0(t,r){return t&&t.length?ii(t,R(r,3),!0,!0):[]}function n0(t,r){return t&&t.length?ii(t,R(r,3),!0):[]}function i0(t,r,n,s){var l=t==null?0:t.length;return l?(n&&typeof n!="number"&&At(t,r,n)&&(n=0,s=l),Zd(t,r,n,s)):[]}function fc(t,r,n){var s=t==null?0:t.length;if(!s)return-1;var l=n==null?0:P(n);return l<0&&(l=dt(s+l,0)),zn(t,R(r,3),l)}function lc(t,r,n){var s=t==null?0:t.length;if(!s)return-1;var l=s-1;return n!==e&&(l=P(n),l=n<0?dt(s+l,0):_t(l,s-1)),zn(t,R(r,3),l,!0)}function hc(t){var r=t==null?0:t.length;return r?wt(t,1):[]}function o0(t){var r=t==null?0:t.length;return r?wt(t,Zr):[]}function u0(t,r){var n=t==null?0:t.length;return n?(r=r===e?1:P(r),wt(t,r)):[]}function a0(t){for(var r=-1,n=t==null?0:t.length,s={};++r<n;){var l=t[r];s[l[0]]=l[1]}return s}function dc(t){return t&&t.length?t[0]:e}function s0(t,r,n){var s=t==null?0:t.length;if(!s)return-1;var l=n==null?0:P(n);return l<0&&(l=dt(s+l,0)),ve(t,r,l)}function c0(t){var r=t==null?0:t.length;return r?Ht(t,0,-1):[]}var f0=M(function(t){var r=nt(t,Jo);return r.length&&r[0]===t[0]?zo(r):[]}),l0=M(function(t){var r=Jt(t),n=nt(t,Jo);return r===Jt(n)?r=e:n.pop(),n.length&&n[0]===t[0]?zo(n,R(r,2)):[]}),h0=M(function(t){var r=Jt(t),n=nt(t,Jo);return r=typeof r=="function"?r:e,r&&n.pop(),n.length&&n[0]===t[0]?zo(n,e,r):[]});function d0(t,r){return t==null?"":cd.call(t,r)}function Jt(t){var r=t==null?0:t.length;return r?t[r-1]:e}function v0(t,r,n){var s=t==null?0:t.length;if(!s)return-1;var l=s;return n!==e&&(l=P(n),l=l<0?dt(s+l,0):_t(l,s-1)),r===r?Jh(t,r,l):zn(t,Ja,l,!0)}function p0(t,r){return t&&t.length?Ss(t,P(r)):e}var g0=M(vc);function vc(t,r){return t&&t.length&&r&&r.length?Vo(t,r):t}function w0(t,r,n){return t&&t.length&&r&&r.length?Vo(t,r,R(n,2)):t}function y0(t,r,n){return t&&t.length&&r&&r.length?Vo(t,r,e,n):t}var _0=yr(function(t,r){var n=t==null?0:t.length,s=Lo(t,r);return Cs(t,nt(r,function(l){return _r(l,n)?+l:l}).sort(zs)),s});function b0(t,r){var n=[];if(!(t&&t.length))return n;var s=-1,l=[],v=t.length;for(r=R(r,3);++s<v;){var w=t[s];r(w,s,t)&&(n.push(w),l.push(s))}return Cs(t,l),n}function au(t){return t==null?t:dd.call(t)}function m0(t,r,n){var s=t==null?0:t.length;return s?(n&&typeof n!="number"&&At(t,r,n)?(r=0,n=s):(r=r==null?0:P(r),n=n===e?s:P(n)),Ht(t,r,n)):[]}function x0(t,r){return ni(t,r)}function A0(t,r,n){return Go(t,r,R(n,2))}function S0(t,r){var n=t==null?0:t.length;if(n){var s=ni(t,r);if(s<n&&tr(t[s],r))return s}return-1}function E0(t,r){return ni(t,r,!0)}function k0(t,r,n){return Go(t,r,R(n,2),!0)}function C0(t,r){var n=t==null?0:t.length;if(n){var s=ni(t,r,!0)-1;if(tr(t[s],r))return s}return-1}function O0(t){return t&&t.length?Ts(t):[]}function T0(t,r){return t&&t.length?Ts(t,R(r,2)):[]}function I0(t){var r=t==null?0:t.length;return r?Ht(t,1,r):[]}function R0(t,r,n){return t&&t.length?(r=n||r===e?1:P(r),Ht(t,0,r<0?0:r)):[]}function D0(t,r,n){var s=t==null?0:t.length;return s?(r=n||r===e?1:P(r),r=s-r,Ht(t,r<0?0:r,s)):[]}function L0(t,r){return t&&t.length?ii(t,R(r,3),!1,!0):[]}function U0(t,r){return t&&t.length?ii(t,R(r,3)):[]}var j0=M(function(t){return Fr(wt(t,1,ct,!0))}),F0=M(function(t){var r=Jt(t);return ct(r)&&(r=e),Fr(wt(t,1,ct,!0),R(r,2))}),z0=M(function(t){var r=Jt(t);return r=typeof r=="function"?r:e,Fr(wt(t,1,ct,!0),e,r)});function B0(t){return t&&t.length?Fr(t):[]}function N0(t,r){return t&&t.length?Fr(t,R(r,2)):[]}function P0(t,r){return r=typeof r=="function"?r:e,t&&t.length?Fr(t,e,r):[]}function su(t){if(!(t&&t.length))return[];var r=0;return t=Ir(t,function(n){if(ct(n))return r=dt(n.length,r),!0}),Eo(r,function(n){return nt(t,xo(n))})}function pc(t,r){if(!(t&&t.length))return[];var n=su(t);return r==null?n:nt(n,function(s){return Ut(r,e,s)})}var V0=M(function(t,r){return ct(t)?en(t,r):[]}),M0=M(function(t){return Ho(Ir(t,ct))}),q0=M(function(t){var r=Jt(t);return ct(r)&&(r=e),Ho(Ir(t,ct),R(r,2))}),G0=M(function(t){var r=Jt(t);return r=typeof r=="function"?r:e,Ho(Ir(t,ct),e,r)}),W0=M(su);function H0(t,r){return Ls(t||[],r||[],rn)}function J0(t,r){return Ls(t||[],r||[],un)}var K0=M(function(t){var r=t.length,n=r>1?t[r-1]:e;return n=typeof n=="function"?(t.pop(),n):e,pc(t,n)});function gc(t){var r=d(t);return r.__chain__=!0,r}function $0(t,r){return r(t),t}function di(t,r){return r(t)}var Z0=yr(function(t){var r=t.length,n=r?t[0]:0,s=this.__wrapped__,l=function(v){return Lo(v,t)};return r>1||this.__actions__.length||!(s instanceof W)||!_r(n)?this.thru(l):(s=s.slice(n,+n+(r?1:0)),s.__actions__.push({func:di,args:[l],thisArg:e}),new Gt(s,this.__chain__).thru(function(v){return r&&!v.length&&v.push(e),v}))});function Y0(){return gc(this)}function X0(){return new Gt(this.value(),this.__chain__)}function Q0(){this.__values__===e&&(this.__values__=Ic(this.value()));var t=this.__index__>=this.__values__.length,r=t?e:this.__values__[this.__index__++];return{done:t,value:r}}function tp(){return this}function rp(t){for(var r,n=this;n instanceof Xn;){var s=cc(n);s.__index__=0,s.__values__=e,r?l.__wrapped__=s:r=s;var l=s;n=n.__wrapped__}return l.__wrapped__=t,r}function ep(){var t=this.__wrapped__;if(t instanceof W){var r=t;return this.__actions__.length&&(r=new W(this)),r=r.reverse(),r.__actions__.push({func:di,args:[au],thisArg:e}),new Gt(r,this.__chain__)}return this.thru(au)}function np(){return Ds(this.__wrapped__,this.__actions__)}var ip=oi(function(t,r,n){Z.call(t,n)?++t[n]:gr(t,n,1)});function op(t,r,n){var s=z(t)?Wa:$d;return n&&At(t,r,n)&&(r=e),s(t,R(r,3))}function up(t,r){var n=z(t)?Ir:ps;return n(t,R(r,3))}var ap=qs(fc),sp=qs(lc);function cp(t,r){return wt(vi(t,r),1)}function fp(t,r){return wt(vi(t,r),Zr)}function lp(t,r,n){return n=n===e?1:P(n),wt(vi(t,r),n)}function wc(t,r){var n=z(t)?Mt:jr;return n(t,R(r,3))}function yc(t,r){var n=z(t)?Ih:vs;return n(t,R(r,3))}var hp=oi(function(t,r,n){Z.call(t,n)?t[n].push(r):gr(t,n,[r])});function dp(t,r,n,s){t=It(t)?t:Ee(t),n=n&&!s?P(n):0;var l=t.length;return n<0&&(n=dt(l+n,0)),_i(t)?n<=l&&t.indexOf(r,n)>-1:!!l&&ve(t,r,n)>-1}var vp=M(function(t,r,n){var s=-1,l=typeof r=="function",v=It(t)?x(t.length):[];return jr(t,function(w){v[++s]=l?Ut(r,w,n):nn(w,r,n)}),v}),pp=oi(function(t,r,n){gr(t,n,r)});function vi(t,r){var n=z(t)?nt:ms;return n(t,R(r,3))}function gp(t,r,n,s){return t==null?[]:(z(r)||(r=r==null?[]:[r]),n=s?e:n,z(n)||(n=n==null?[]:[n]),Es(t,r,n))}var wp=oi(function(t,r,n){t[n?0:1].push(r)},function(){return[[],[]]});function yp(t,r,n){var s=z(t)?bo:$a,l=arguments.length<3;return s(t,R(r,4),n,l,jr)}function _p(t,r,n){var s=z(t)?Rh:$a,l=arguments.length<3;return s(t,R(r,4),n,l,vs)}function bp(t,r){var n=z(t)?Ir:ps;return n(t,wi(R(r,3)))}function mp(t){var r=z(t)?fs:dv;return r(t)}function xp(t,r,n){(n?At(t,r,n):r===e)?r=1:r=P(r);var s=z(t)?Gd:vv;return s(t,r)}function Ap(t){var r=z(t)?Wd:gv;return r(t)}function Sp(t){if(t==null)return 0;if(It(t))return _i(t)?ge(t):t.length;var r=bt(t);return r==Zt||r==Yt?t.size:No(t).length}function Ep(t,r,n){var s=z(t)?mo:wv;return n&&At(t,r,n)&&(r=e),s(t,R(r,3))}var kp=M(function(t,r){if(t==null)return[];var n=r.length;return n>1&&At(t,r[0],r[1])?r=[]:n>2&&At(r[0],r[1],r[2])&&(r=[r[0]]),Es(t,wt(r,1),[])}),pi=ud||function(){return vt.Date.now()};function Cp(t,r){if(typeof r!="function")throw new qt(h);return t=P(t),function(){if(--t<1)return r.apply(this,arguments)}}function _c(t,r,n){return r=n?e:r,r=t&&r==null?t.length:r,wr(t,Pt,e,e,e,e,r)}function bc(t,r){var n;if(typeof r!="function")throw new qt(h);return t=P(t),function(){return--t>0&&(n=r.apply(this,arguments)),t<=1&&(r=e),n}}var cu=M(function(t,r,n){var s=B;if(n.length){var l=Dr(n,Ae(cu));s|=Lt}return wr(t,s,r,n,l)}),mc=M(function(t,r,n){var s=B|yt;if(n.length){var l=Dr(n,Ae(mc));s|=Lt}return wr(r,s,t,n,l)});function xc(t,r,n){r=n?e:r;var s=wr(t,lt,e,e,e,e,e,r);return s.placeholder=xc.placeholder,s}function Ac(t,r,n){r=n?e:r;var s=wr(t,ar,e,e,e,e,e,r);return s.placeholder=Ac.placeholder,s}function Sc(t,r,n){var s,l,v,w,y,m,E=0,k=!1,C=!1,O=!0;if(typeof t!="function")throw new qt(h);r=Kt(r)||0,it(n)&&(k=!!n.leading,C="maxWait"in n,v=C?dt(Kt(n.maxWait)||0,r):v,O="trailing"in n?!!n.trailing:O);function I(ft){var rr=s,xr=l;return s=l=e,E=ft,w=t.apply(xr,rr),w}function D(ft){return E=ft,y=cn(q,r),k?I(ft):w}function V(ft){var rr=ft-m,xr=ft-E,qc=r-rr;return C?_t(qc,v-xr):qc}function L(ft){var rr=ft-m,xr=ft-E;return m===e||rr>=r||rr<0||C&&xr>=v}function q(){var ft=pi();if(L(ft))return J(ft);y=cn(q,V(ft))}function J(ft){return y=e,O&&s?I(ft):(s=l=e,w)}function Bt(){y!==e&&Us(y),E=0,s=m=l=y=e}function St(){return y===e?w:J(pi())}function Nt(){var ft=pi(),rr=L(ft);if(s=arguments,l=this,m=ft,rr){if(y===e)return D(m);if(C)return Us(y),y=cn(q,r),I(m)}return y===e&&(y=cn(q,r)),w}return Nt.cancel=Bt,Nt.flush=St,Nt}var Op=M(function(t,r){return ds(t,1,r)}),Tp=M(function(t,r,n){return ds(t,Kt(r)||0,n)});function Ip(t){return wr(t,Qi)}function gi(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new qt(h);var n=function(){var s=arguments,l=r?r.apply(this,s):s[0],v=n.cache;if(v.has(l))return v.get(l);var w=t.apply(this,s);return n.cache=v.set(l,w)||v,w};return n.cache=new(gi.Cache||pr),n}gi.Cache=pr;function wi(t){if(typeof t!="function")throw new qt(h);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2])}return!t.apply(this,r)}}function Rp(t){return bc(2,t)}var Dp=yv(function(t,r){r=r.length==1&&z(r[0])?nt(r[0],jt(R())):nt(wt(r,1),jt(R()));var n=r.length;return M(function(s){for(var l=-1,v=_t(s.length,n);++l<v;)s[l]=r[l].call(this,s[l]);return Ut(t,this,s)})}),fu=M(function(t,r){var n=Dr(r,Ae(fu));return wr(t,Lt,e,r,n)}),Ec=M(function(t,r){var n=Dr(r,Ae(Ec));return wr(t,sr,e,r,n)}),Lp=yr(function(t,r){return wr(t,$r,e,e,e,r)});function Up(t,r){if(typeof t!="function")throw new qt(h);return r=r===e?r:P(r),M(t,r)}function jp(t,r){if(typeof t!="function")throw new qt(h);return r=r==null?0:dt(P(r),0),M(function(n){var s=n[r],l=Br(n,0,r);return s&&Rr(l,s),Ut(t,this,l)})}function Fp(t,r,n){var s=!0,l=!0;if(typeof t!="function")throw new qt(h);return it(n)&&(s="leading"in n?!!n.leading:s,l="trailing"in n?!!n.trailing:l),Sc(t,r,{leading:s,maxWait:r,trailing:l})}function zp(t){return _c(t,1)}function Bp(t,r){return fu(Ko(r),t)}function Np(){if(!arguments.length)return[];var t=arguments[0];return z(t)?t:[t]}function Pp(t){return Wt(t,H)}function Vp(t,r){return r=typeof r=="function"?r:e,Wt(t,H,r)}function Mp(t){return Wt(t,A|H)}function qp(t,r){return r=typeof r=="function"?r:e,Wt(t,A|H,r)}function Gp(t,r){return r==null||hs(t,r,pt(r))}function tr(t,r){return t===r||t!==t&&r!==r}var Wp=ci(Fo),Hp=ci(function(t,r){return t>=r}),oe=ys(function(){return arguments}())?ys:function(t){return at(t)&&Z.call(t,"callee")&&!is.call(t,"callee")},z=x.isArray,Jp=Na?jt(Na):rv;function It(t){return t!=null&&yi(t.length)&&!br(t)}function ct(t){return at(t)&&It(t)}function Kp(t){return t===!0||t===!1||at(t)&&xt(t)==Me}var Nr=sd||mu,$p=Pa?jt(Pa):ev;function Zp(t){return at(t)&&t.nodeType===1&&!fn(t)}function Yp(t){if(t==null)return!0;if(It(t)&&(z(t)||typeof t=="string"||typeof t.splice=="function"||Nr(t)||Se(t)||oe(t)))return!t.length;var r=bt(t);if(r==Zt||r==Yt)return!t.size;if(sn(t))return!No(t).length;for(var n in t)if(Z.call(t,n))return!1;return!0}function Xp(t,r){return on(t,r)}function Qp(t,r,n){n=typeof n=="function"?n:e;var s=n?n(t,r):e;return s===e?on(t,r,e,n):!!s}function lu(t){if(!at(t))return!1;var r=xt(t);return r==In||r==xl||typeof t.message=="string"&&typeof t.name=="string"&&!fn(t)}function tg(t){return typeof t=="number"&&us(t)}function br(t){if(!it(t))return!1;var r=xt(t);return r==Rn||r==da||r==ml||r==Sl}function kc(t){return typeof t=="number"&&t==P(t)}function yi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Tr}function it(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}function at(t){return t!=null&&typeof t=="object"}var Cc=Va?jt(Va):iv;function rg(t,r){return t===r||Bo(t,r,ru(r))}function eg(t,r,n){return n=typeof n=="function"?n:e,Bo(t,r,ru(r),n)}function ng(t){return Oc(t)&&t!=+t}function ig(t){if(Vv(t))throw new F(i);return _s(t)}function og(t){return t===null}function ug(t){return t==null}function Oc(t){return typeof t=="number"||at(t)&&xt(t)==Ge}function fn(t){if(!at(t)||xt(t)!=dr)return!1;var r=Wn(t);if(r===null)return!0;var n=Z.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&Vn.call(n)==ed}var hu=Ma?jt(Ma):ov;function ag(t){return kc(t)&&t>=-Tr&&t<=Tr}var Tc=qa?jt(qa):uv;function _i(t){return typeof t=="string"||!z(t)&&at(t)&&xt(t)==He}function zt(t){return typeof t=="symbol"||at(t)&&xt(t)==Dn}var Se=Ga?jt(Ga):av;function sg(t){return t===e}function cg(t){return at(t)&&bt(t)==Je}function fg(t){return at(t)&&xt(t)==kl}var lg=ci(Po),hg=ci(function(t,r){return t<=r});function Ic(t){if(!t)return[];if(It(t))return _i(t)?Xt(t):Tt(t);if(Ze&&t[Ze])return Gh(t[Ze]());var r=bt(t),n=r==Zt?Co:r==Yt?Bn:Ee;return n(t)}function mr(t){if(!t)return t===0?t:0;if(t=Kt(t),t===Zr||t===-Zr){var r=t<0?-1:1;return r*wl}return t===t?t:0}function P(t){var r=mr(t),n=r%1;return r===r?n?r-n:r:0}function Rc(t){return t?re(P(t),0,cr):0}function Kt(t){if(typeof t=="number")return t;if(zt(t))return On;if(it(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=it(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=Za(t);var n=Jl.test(t);return n||$l.test(t)?Ch(t.slice(2),n?2:8):Hl.test(t)?On:+t}function Dc(t){return lr(t,Rt(t))}function dg(t){return t?re(P(t),-Tr,Tr):t===0?t:0}function $(t){return t==null?"":Ft(t)}var vg=me(function(t,r){if(sn(r)||It(r)){lr(r,pt(r),t);return}for(var n in r)Z.call(r,n)&&rn(t,n,r[n])}),Lc=me(function(t,r){lr(r,Rt(r),t)}),bi=me(function(t,r,n,s){lr(r,Rt(r),t,s)}),pg=me(function(t,r,n,s){lr(r,pt(r),t,s)}),gg=yr(Lo);function wg(t,r){var n=be(t);return r==null?n:ls(n,r)}var yg=M(function(t,r){t=X(t);var n=-1,s=r.length,l=s>2?r[2]:e;for(l&&At(r[0],r[1],l)&&(s=1);++n<s;)for(var v=r[n],w=Rt(v),y=-1,m=w.length;++y<m;){var E=w[y],k=t[E];(k===e||tr(k,we[E])&&!Z.call(t,E))&&(t[E]=v[E])}return t}),_g=M(function(t){return t.push(e,Zs),Ut(Uc,e,t)});function bg(t,r){return Ha(t,R(r,3),fr)}function mg(t,r){return Ha(t,R(r,3),jo)}function xg(t,r){return t==null?t:Uo(t,R(r,3),Rt)}function Ag(t,r){return t==null?t:gs(t,R(r,3),Rt)}function Sg(t,r){return t&&fr(t,R(r,3))}function Eg(t,r){return t&&jo(t,R(r,3))}function kg(t){return t==null?[]:ri(t,pt(t))}function Cg(t){return t==null?[]:ri(t,Rt(t))}function du(t,r,n){var s=t==null?e:ee(t,r);return s===e?n:s}function Og(t,r){return t!=null&&Qs(t,r,Yd)}function vu(t,r){return t!=null&&Qs(t,r,Xd)}var Tg=Ws(function(t,r,n){r!=null&&typeof r.toString!="function"&&(r=Mn.call(r)),t[r]=n},gu(Dt)),Ig=Ws(function(t,r,n){r!=null&&typeof r.toString!="function"&&(r=Mn.call(r)),Z.call(t,r)?t[r].push(n):t[r]=[n]},R),Rg=M(nn);function pt(t){return It(t)?cs(t):No(t)}function Rt(t){return It(t)?cs(t,!0):sv(t)}function Dg(t,r){var n={};return r=R(r,3),fr(t,function(s,l,v){gr(n,r(s,l,v),s)}),n}function Lg(t,r){var n={};return r=R(r,3),fr(t,function(s,l,v){gr(n,l,r(s,l,v))}),n}var Ug=me(function(t,r,n){ei(t,r,n)}),Uc=me(function(t,r,n,s){ei(t,r,n,s)}),jg=yr(function(t,r){var n={};if(t==null)return n;var s=!1;r=nt(r,function(v){return v=zr(v,t),s||(s=v.length>1),v}),lr(t,Qo(t),n),s&&(n=Wt(n,A|N|H,Tv));for(var l=r.length;l--;)Wo(n,r[l]);return n});function Fg(t,r){return jc(t,wi(R(r)))}var zg=yr(function(t,r){return t==null?{}:fv(t,r)});function jc(t,r){if(t==null)return{};var n=nt(Qo(t),function(s){return[s]});return r=R(r),ks(t,n,function(s,l){return r(s,l[0])})}function Bg(t,r,n){r=zr(r,t);var s=-1,l=r.length;for(l||(l=1,t=e);++s<l;){var v=t==null?e:t[hr(r[s])];v===e&&(s=l,v=n),t=br(v)?v.call(t):v}return t}function Ng(t,r,n){return t==null?t:un(t,r,n)}function Pg(t,r,n,s){return s=typeof s=="function"?s:e,t==null?t:un(t,r,n,s)}var Fc=Ks(pt),zc=Ks(Rt);function Vg(t,r,n){var s=z(t),l=s||Nr(t)||Se(t);if(r=R(r,4),n==null){var v=t&&t.constructor;l?n=s?new v:[]:it(t)?n=br(v)?be(Wn(t)):{}:n={}}return(l?Mt:fr)(t,function(w,y,m){return r(n,w,y,m)}),n}function Mg(t,r){return t==null?!0:Wo(t,r)}function qg(t,r,n){return t==null?t:Rs(t,r,Ko(n))}function Gg(t,r,n,s){return s=typeof s=="function"?s:e,t==null?t:Rs(t,r,Ko(n),s)}function Ee(t){return t==null?[]:ko(t,pt(t))}function Wg(t){return t==null?[]:ko(t,Rt(t))}function Hg(t,r,n){return n===e&&(n=r,r=e),n!==e&&(n=Kt(n),n=n===n?n:0),r!==e&&(r=Kt(r),r=r===r?r:0),re(Kt(t),r,n)}function Jg(t,r,n){return r=mr(r),n===e?(n=r,r=0):n=mr(n),t=Kt(t),Qd(t,r,n)}function Kg(t,r,n){if(n&&typeof n!="boolean"&&At(t,r,n)&&(r=n=e),n===e&&(typeof r=="boolean"?(n=r,r=e):typeof t=="boolean"&&(n=t,t=e)),t===e&&r===e?(t=0,r=1):(t=mr(t),r===e?(r=t,t=0):r=mr(r)),t>r){var s=t;t=r,r=s}if(n||t%1||r%1){var l=as();return _t(t+l*(r-t+kh("1e-"+((l+"").length-1))),r)}return Mo(t,r)}var $g=xe(function(t,r,n){return r=r.toLowerCase(),t+(n?Bc(r):r)});function Bc(t){return pu($(t).toLowerCase())}function Nc(t){return t=$(t),t&&t.replace(Yl,Nh).replace(gh,"")}function Zg(t,r,n){t=$(t),r=Ft(r);var s=t.length;n=n===e?s:re(P(n),0,s);var l=n;return n-=r.length,n>=0&&t.slice(n,l)==r}function Yg(t){return t=$(t),t&&Rl.test(t)?t.replace(ga,Ph):t}function Xg(t){return t=$(t),t&&zl.test(t)?t.replace(co,"\\$&"):t}var Qg=xe(function(t,r,n){return t+(n?"-":"")+r.toLowerCase()}),tw=xe(function(t,r,n){return t+(n?" ":"")+r.toLowerCase()}),rw=Ms("toLowerCase");function ew(t,r,n){t=$(t),r=P(r);var s=r?ge(t):0;if(!r||s>=r)return t;var l=(r-s)/2;return si($n(l),n)+t+si(Kn(l),n)}function nw(t,r,n){t=$(t),r=P(r);var s=r?ge(t):0;return r&&s<r?t+si(r-s,n):t}function iw(t,r,n){t=$(t),r=P(r);var s=r?ge(t):0;return r&&s<r?si(r-s,n)+t:t}function ow(t,r,n){return n||r==null?r=0:r&&(r=+r),hd($(t).replace(fo,""),r||0)}function uw(t,r,n){return(n?At(t,r,n):r===e)?r=1:r=P(r),qo($(t),r)}function aw(){var t=arguments,r=$(t[0]);return t.length<3?r:r.replace(t[1],t[2])}var sw=xe(function(t,r,n){return t+(n?"_":"")+r.toLowerCase()});function cw(t,r,n){return n&&typeof n!="number"&&At(t,r,n)&&(r=n=e),n=n===e?cr:n>>>0,n?(t=$(t),t&&(typeof r=="string"||r!=null&&!hu(r))&&(r=Ft(r),!r&&pe(t))?Br(Xt(t),0,n):t.split(r,n)):[]}var fw=xe(function(t,r,n){return t+(n?" ":"")+pu(r)});function lw(t,r,n){return t=$(t),n=n==null?0:re(P(n),0,t.length),r=Ft(r),t.slice(n,n+r.length)==r}function hw(t,r,n){var s=d.templateSettings;n&&At(t,r,n)&&(r=e),t=$(t),r=bi({},r,s,$s);var l=bi({},r.imports,s.imports,$s),v=pt(l),w=ko(l,v),y,m,E=0,k=r.interpolate||Ln,C="__p += '",O=Oo((r.escape||Ln).source+"|"+k.source+"|"+(k===wa?Wl:Ln).source+"|"+(r.evaluate||Ln).source+"|$","g"),I="//# sourceURL="+(Z.call(r,"sourceURL")?(r.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++mh+"]")+`
`;t.replace(O,function(L,q,J,Bt,St,Nt){return J||(J=Bt),C+=t.slice(E,Nt).replace(Xl,Vh),q&&(y=!0,C+=`' +
__e(`+q+`) +
'`),St&&(m=!0,C+=`';
`+St+`;
__p += '`),J&&(C+=`' +
((__t = (`+J+`)) == null ? '' : __t) +
'`),E=Nt+L.length,L}),C+=`';
`;var D=Z.call(r,"variable")&&r.variable;if(!D)C=`with (obj) {
`+C+`
}
`;else if(ql.test(D))throw new F(p);C=(m?C.replace(Cl,""):C).replace(Ol,"$1").replace(Tl,"$1;"),C="function("+(D||"obj")+`) {
`+(D?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(y?", __e = _.escape":"")+(m?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+C+`return __p
}`;var V=Vc(function(){return K(v,I+"return "+C).apply(e,w)});if(V.source=C,lu(V))throw V;return V}function dw(t){return $(t).toLowerCase()}function vw(t){return $(t).toUpperCase()}function pw(t,r,n){if(t=$(t),t&&(n||r===e))return Za(t);if(!t||!(r=Ft(r)))return t;var s=Xt(t),l=Xt(r),v=Ya(s,l),w=Xa(s,l)+1;return Br(s,v,w).join("")}function gw(t,r,n){if(t=$(t),t&&(n||r===e))return t.slice(0,ts(t)+1);if(!t||!(r=Ft(r)))return t;var s=Xt(t),l=Xa(s,Xt(r))+1;return Br(s,0,l).join("")}function ww(t,r,n){if(t=$(t),t&&(n||r===e))return t.replace(fo,"");if(!t||!(r=Ft(r)))return t;var s=Xt(t),l=Ya(s,Xt(r));return Br(s,l).join("")}function yw(t,r){var n=ll,s=hl;if(it(r)){var l="separator"in r?r.separator:l;n="length"in r?P(r.length):n,s="omission"in r?Ft(r.omission):s}t=$(t);var v=t.length;if(pe(t)){var w=Xt(t);v=w.length}if(n>=v)return t;var y=n-ge(s);if(y<1)return s;var m=w?Br(w,0,y).join(""):t.slice(0,y);if(l===e)return m+s;if(w&&(y+=m.length-y),hu(l)){if(t.slice(y).search(l)){var E,k=m;for(l.global||(l=Oo(l.source,$(ya.exec(l))+"g")),l.lastIndex=0;E=l.exec(k);)var C=E.index;m=m.slice(0,C===e?y:C)}}else if(t.indexOf(Ft(l),y)!=y){var O=m.lastIndexOf(l);O>-1&&(m=m.slice(0,O))}return m+s}function _w(t){return t=$(t),t&&Il.test(t)?t.replace(pa,Kh):t}var bw=xe(function(t,r,n){return t+(n?" ":"")+r.toUpperCase()}),pu=Ms("toUpperCase");function Pc(t,r,n){return t=$(t),r=n?e:r,r===e?qh(t)?Yh(t):Uh(t):t.match(r)||[]}var Vc=M(function(t,r){try{return Ut(t,e,r)}catch(n){return lu(n)?n:new F(n)}}),mw=yr(function(t,r){return Mt(r,function(n){n=hr(n),gr(t,n,cu(t[n],t))}),t});function xw(t){var r=t==null?0:t.length,n=R();return t=r?nt(t,function(s){if(typeof s[1]!="function")throw new qt(h);return[n(s[0]),s[1]]}):[],M(function(s){for(var l=-1;++l<r;){var v=t[l];if(Ut(v[0],this,s))return Ut(v[1],this,s)}})}function Aw(t){return Kd(Wt(t,A))}function gu(t){return function(){return t}}function Sw(t,r){return t==null||t!==t?r:t}var Ew=Gs(),kw=Gs(!0);function Dt(t){return t}function wu(t){return bs(typeof t=="function"?t:Wt(t,A))}function Cw(t){return xs(Wt(t,A))}function Ow(t,r){return As(t,Wt(r,A))}var Tw=M(function(t,r){return function(n){return nn(n,t,r)}}),Iw=M(function(t,r){return function(n){return nn(t,n,r)}});function yu(t,r,n){var s=pt(r),l=ri(r,s);n==null&&!(it(r)&&(l.length||!s.length))&&(n=r,r=t,t=this,l=ri(r,pt(r)));var v=!(it(n)&&"chain"in n)||!!n.chain,w=br(t);return Mt(l,function(y){var m=r[y];t[y]=m,w&&(t.prototype[y]=function(){var E=this.__chain__;if(v||E){var k=t(this.__wrapped__),C=k.__actions__=Tt(this.__actions__);return C.push({func:m,args:arguments,thisArg:t}),k.__chain__=E,k}return m.apply(t,Rr([this.value()],arguments))})}),t}function Rw(){return vt._===this&&(vt._=nd),this}function _u(){}function Dw(t){return t=P(t),M(function(r){return Ss(r,t)})}var Lw=Zo(nt),Uw=Zo(Wa),jw=Zo(mo);function Mc(t){return nu(t)?xo(hr(t)):lv(t)}function Fw(t){return function(r){return t==null?e:ee(t,r)}}var zw=Hs(),Bw=Hs(!0);function bu(){return[]}function mu(){return!1}function Nw(){return{}}function Pw(){return""}function Vw(){return!0}function Mw(t,r){if(t=P(t),t<1||t>Tr)return[];var n=cr,s=_t(t,cr);r=R(r),t-=cr;for(var l=Eo(s,r);++n<t;)r(n);return l}function qw(t){return z(t)?nt(t,hr):zt(t)?[t]:Tt(sc($(t)))}function Gw(t){var r=++rd;return $(t)+r}var Ww=ai(function(t,r){return t+r},0),Hw=Yo("ceil"),Jw=ai(function(t,r){return t/r},1),Kw=Yo("floor");function $w(t){return t&&t.length?ti(t,Dt,Fo):e}function Zw(t,r){return t&&t.length?ti(t,R(r,2),Fo):e}function Yw(t){return Ka(t,Dt)}function Xw(t,r){return Ka(t,R(r,2))}function Qw(t){return t&&t.length?ti(t,Dt,Po):e}function t1(t,r){return t&&t.length?ti(t,R(r,2),Po):e}var r1=ai(function(t,r){return t*r},1),e1=Yo("round"),n1=ai(function(t,r){return t-r},0);function i1(t){return t&&t.length?So(t,Dt):0}function o1(t,r){return t&&t.length?So(t,R(r,2)):0}return d.after=Cp,d.ary=_c,d.assign=vg,d.assignIn=Lc,d.assignInWith=bi,d.assignWith=pg,d.at=gg,d.before=bc,d.bind=cu,d.bindAll=mw,d.bindKey=mc,d.castArray=Np,d.chain=gc,d.chunk=Kv,d.compact=$v,d.concat=Zv,d.cond=xw,d.conforms=Aw,d.constant=gu,d.countBy=ip,d.create=wg,d.curry=xc,d.curryRight=Ac,d.debounce=Sc,d.defaults=yg,d.defaultsDeep=_g,d.defer=Op,d.delay=Tp,d.difference=Yv,d.differenceBy=Xv,d.differenceWith=Qv,d.drop=t0,d.dropRight=r0,d.dropRightWhile=e0,d.dropWhile=n0,d.fill=i0,d.filter=up,d.flatMap=cp,d.flatMapDeep=fp,d.flatMapDepth=lp,d.flatten=hc,d.flattenDeep=o0,d.flattenDepth=u0,d.flip=Ip,d.flow=Ew,d.flowRight=kw,d.fromPairs=a0,d.functions=kg,d.functionsIn=Cg,d.groupBy=hp,d.initial=c0,d.intersection=f0,d.intersectionBy=l0,d.intersectionWith=h0,d.invert=Tg,d.invertBy=Ig,d.invokeMap=vp,d.iteratee=wu,d.keyBy=pp,d.keys=pt,d.keysIn=Rt,d.map=vi,d.mapKeys=Dg,d.mapValues=Lg,d.matches=Cw,d.matchesProperty=Ow,d.memoize=gi,d.merge=Ug,d.mergeWith=Uc,d.method=Tw,d.methodOf=Iw,d.mixin=yu,d.negate=wi,d.nthArg=Dw,d.omit=jg,d.omitBy=Fg,d.once=Rp,d.orderBy=gp,d.over=Lw,d.overArgs=Dp,d.overEvery=Uw,d.overSome=jw,d.partial=fu,d.partialRight=Ec,d.partition=wp,d.pick=zg,d.pickBy=jc,d.property=Mc,d.propertyOf=Fw,d.pull=g0,d.pullAll=vc,d.pullAllBy=w0,d.pullAllWith=y0,d.pullAt=_0,d.range=zw,d.rangeRight=Bw,d.rearg=Lp,d.reject=bp,d.remove=b0,d.rest=Up,d.reverse=au,d.sampleSize=xp,d.set=Ng,d.setWith=Pg,d.shuffle=Ap,d.slice=m0,d.sortBy=kp,d.sortedUniq=O0,d.sortedUniqBy=T0,d.split=cw,d.spread=jp,d.tail=I0,d.take=R0,d.takeRight=D0,d.takeRightWhile=L0,d.takeWhile=U0,d.tap=$0,d.throttle=Fp,d.thru=di,d.toArray=Ic,d.toPairs=Fc,d.toPairsIn=zc,d.toPath=qw,d.toPlainObject=Dc,d.transform=Vg,d.unary=zp,d.union=j0,d.unionBy=F0,d.unionWith=z0,d.uniq=B0,d.uniqBy=N0,d.uniqWith=P0,d.unset=Mg,d.unzip=su,d.unzipWith=pc,d.update=qg,d.updateWith=Gg,d.values=Ee,d.valuesIn=Wg,d.without=V0,d.words=Pc,d.wrap=Bp,d.xor=M0,d.xorBy=q0,d.xorWith=G0,d.zip=W0,d.zipObject=H0,d.zipObjectDeep=J0,d.zipWith=K0,d.entries=Fc,d.entriesIn=zc,d.extend=Lc,d.extendWith=bi,yu(d,d),d.add=Ww,d.attempt=Vc,d.camelCase=$g,d.capitalize=Bc,d.ceil=Hw,d.clamp=Hg,d.clone=Pp,d.cloneDeep=Mp,d.cloneDeepWith=qp,d.cloneWith=Vp,d.conformsTo=Gp,d.deburr=Nc,d.defaultTo=Sw,d.divide=Jw,d.endsWith=Zg,d.eq=tr,d.escape=Yg,d.escapeRegExp=Xg,d.every=op,d.find=ap,d.findIndex=fc,d.findKey=bg,d.findLast=sp,d.findLastIndex=lc,d.findLastKey=mg,d.floor=Kw,d.forEach=wc,d.forEachRight=yc,d.forIn=xg,d.forInRight=Ag,d.forOwn=Sg,d.forOwnRight=Eg,d.get=du,d.gt=Wp,d.gte=Hp,d.has=Og,d.hasIn=vu,d.head=dc,d.identity=Dt,d.includes=dp,d.indexOf=s0,d.inRange=Jg,d.invoke=Rg,d.isArguments=oe,d.isArray=z,d.isArrayBuffer=Jp,d.isArrayLike=It,d.isArrayLikeObject=ct,d.isBoolean=Kp,d.isBuffer=Nr,d.isDate=$p,d.isElement=Zp,d.isEmpty=Yp,d.isEqual=Xp,d.isEqualWith=Qp,d.isError=lu,d.isFinite=tg,d.isFunction=br,d.isInteger=kc,d.isLength=yi,d.isMap=Cc,d.isMatch=rg,d.isMatchWith=eg,d.isNaN=ng,d.isNative=ig,d.isNil=ug,d.isNull=og,d.isNumber=Oc,d.isObject=it,d.isObjectLike=at,d.isPlainObject=fn,d.isRegExp=hu,d.isSafeInteger=ag,d.isSet=Tc,d.isString=_i,d.isSymbol=zt,d.isTypedArray=Se,d.isUndefined=sg,d.isWeakMap=cg,d.isWeakSet=fg,d.join=d0,d.kebabCase=Qg,d.last=Jt,d.lastIndexOf=v0,d.lowerCase=tw,d.lowerFirst=rw,d.lt=lg,d.lte=hg,d.max=$w,d.maxBy=Zw,d.mean=Yw,d.meanBy=Xw,d.min=Qw,d.minBy=t1,d.stubArray=bu,d.stubFalse=mu,d.stubObject=Nw,d.stubString=Pw,d.stubTrue=Vw,d.multiply=r1,d.nth=p0,d.noConflict=Rw,d.noop=_u,d.now=pi,d.pad=ew,d.padEnd=nw,d.padStart=iw,d.parseInt=ow,d.random=Kg,d.reduce=yp,d.reduceRight=_p,d.repeat=uw,d.replace=aw,d.result=Bg,d.round=e1,d.runInContext=b,d.sample=mp,d.size=Sp,d.snakeCase=sw,d.some=Ep,d.sortedIndex=x0,d.sortedIndexBy=A0,d.sortedIndexOf=S0,d.sortedLastIndex=E0,d.sortedLastIndexBy=k0,d.sortedLastIndexOf=C0,d.startCase=fw,d.startsWith=lw,d.subtract=n1,d.sum=i1,d.sumBy=o1,d.template=hw,d.times=Mw,d.toFinite=mr,d.toInteger=P,d.toLength=Rc,d.toLower=dw,d.toNumber=Kt,d.toSafeInteger=dg,d.toString=$,d.toUpper=vw,d.trim=pw,d.trimEnd=gw,d.trimStart=ww,d.truncate=yw,d.unescape=_w,d.uniqueId=Gw,d.upperCase=bw,d.upperFirst=pu,d.each=wc,d.eachRight=yc,d.first=dc,yu(d,function(){var t={};return fr(d,function(r,n){Z.call(d.prototype,n)||(t[n]=r)}),t}(),{chain:!1}),d.VERSION=c,Mt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){d[t].placeholder=d}),Mt(["drop","take"],function(t,r){W.prototype[t]=function(n){n=n===e?1:dt(P(n),0);var s=this.__filtered__&&!r?new W(this):this.clone();return s.__filtered__?s.__takeCount__=_t(n,s.__takeCount__):s.__views__.push({size:_t(n,cr),type:t+(s.__dir__<0?"Right":"")}),s},W.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),Mt(["filter","map","takeWhile"],function(t,r){var n=r+1,s=n==ha||n==gl;W.prototype[t]=function(l){var v=this.clone();return v.__iteratees__.push({iteratee:R(l,3),type:n}),v.__filtered__=v.__filtered__||s,v}}),Mt(["head","last"],function(t,r){var n="take"+(r?"Right":"");W.prototype[t]=function(){return this[n](1).value()[0]}}),Mt(["initial","tail"],function(t,r){var n="drop"+(r?"":"Right");W.prototype[t]=function(){return this.__filtered__?new W(this):this[n](1)}}),W.prototype.compact=function(){return this.filter(Dt)},W.prototype.find=function(t){return this.filter(t).head()},W.prototype.findLast=function(t){return this.reverse().find(t)},W.prototype.invokeMap=M(function(t,r){return typeof t=="function"?new W(this):this.map(function(n){return nn(n,t,r)})}),W.prototype.reject=function(t){return this.filter(wi(R(t)))},W.prototype.slice=function(t,r){t=P(t);var n=this;return n.__filtered__&&(t>0||r<0)?new W(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),r!==e&&(r=P(r),n=r<0?n.dropRight(-r):n.take(r-t)),n)},W.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},W.prototype.toArray=function(){return this.take(cr)},fr(W.prototype,function(t,r){var n=/^(?:filter|find|map|reject)|While$/.test(r),s=/^(?:head|last)$/.test(r),l=d[s?"take"+(r=="last"?"Right":""):r],v=s||/^find/.test(r);l&&(d.prototype[r]=function(){var w=this.__wrapped__,y=s?[1]:arguments,m=w instanceof W,E=y[0],k=m||z(w),C=function(q){var J=l.apply(d,Rr([q],y));return s&&O?J[0]:J};k&&n&&typeof E=="function"&&E.length!=1&&(m=k=!1);var O=this.__chain__,I=!!this.__actions__.length,D=v&&!O,V=m&&!I;if(!v&&k){w=V?w:new W(this);var L=t.apply(w,y);return L.__actions__.push({func:di,args:[C],thisArg:e}),new Gt(L,O)}return D&&V?t.apply(this,y):(L=this.thru(C),D?s?L.value()[0]:L.value():L)})}),Mt(["pop","push","shift","sort","splice","unshift"],function(t){var r=Nn[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",s=/^(?:pop|shift)$/.test(t);d.prototype[t]=function(){var l=arguments;if(s&&!this.__chain__){var v=this.value();return r.apply(z(v)?v:[],l)}return this[n](function(w){return r.apply(z(w)?w:[],l)})}}),fr(W.prototype,function(t,r){var n=d[r];if(n){var s=n.name+"";Z.call(_e,s)||(_e[s]=[]),_e[s].push({name:r,func:n})}}),_e[ui(e,yt).name]=[{name:"wrapper",func:e}],W.prototype.clone=_d,W.prototype.reverse=bd,W.prototype.value=md,d.prototype.at=Z0,d.prototype.chain=Y0,d.prototype.commit=X0,d.prototype.next=Q0,d.prototype.plant=rp,d.prototype.reverse=ep,d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=np,d.prototype.first=d.prototype.head,Ze&&(d.prototype[Ze]=tp),d},Lr=Xh();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vt._=Lr,define(function(){return Lr})):Yr?((Yr.exports=Lr)._=Lr,wo._=Lr):vt._=Lr}).call(o)}),g1=(o,u)=>JSON.parse(JSON.stringify(o,(e,c)=>e===u?void 0:c)),xi=o=>p1+o;var Jc=o=>g1(o,"format"),Kc=({id:o,value:{jsonSchema:u,displayFieldName:e}})=>({id:o,jsonSchema:u,displayFieldName:e}),ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ln=0;ln<ke.length;ln++)hn[ke.charCodeAt(ln)]=ln;var ln,w1=function(o){var u=new Uint8Array(o),e,c=u.length,f="";for(e=0;e<c;e+=3)f+=ke[u[e]>>2],f+=ke[(u[e]&3)<<4|u[e+1]>>4],f+=ke[(u[e+1]&15)<<2|u[e+2]>>6],f+=ke[u[e+2]&63];return c%3===2?f=f.substring(0,f.length-1)+"=":c%3===1&&(f=f.substring(0,f.length-2)+"=="),f},y1=function(o){var u=o.length*.75,e=o.length,c,f=0,i,h,p,_;o[o.length-1]==="="&&(u--,o[o.length-2]==="="&&u--);var a=new ArrayBuffer(u),g=new Uint8Array(a);for(c=0;c<e;c+=4)i=hn[o.charCodeAt(c)],h=hn[o.charCodeAt(c+1)],p=hn[o.charCodeAt(c+2)],_=hn[o.charCodeAt(c+3)],g[f++]=i<<2|h>>4,g[f++]=(h&15)<<4|p>>2,g[f++]=(p&3)<<6|_&63;return a},Au=async(o,u)=>{let e=0;for(let c of o)if(await u(await c,e++)===Au.stop)break;return o};Au.stop=Symbol("pEachSeries.stop");var $c=Au,Pr="__undefined__",ue=o=>JSON.stringify(o,(u,e)=>e===void 0?Pr:e===Pr?Pr+Pr:e),er=o=>JSON.parse(o,(u,e)=>{if(e!==Pr)return e===Pr+Pr?Pr:e}),_1=o=>{let u=o,e=!0;return Object.values(u).forEach(c=>{(c.value===void 0||c.fileName===void 0)&&(e=!1)}),e},b1="Blob could not be serialized",mi="The proxy app only allows responses of type arraybuffer, blob, or json.",Ce=async o=>(await fetch(o)).blob(),Oe=async o=>new Promise((u,e)=>{let c=new FileReader;c.onloadend=()=>u(c.result),c.onerror=()=>e(new Error(b1)),c.readAsDataURL(o)}),m1=o=>y1(o),x1=o=>w1(o),A1=o=>{let u={};return o.forEach((e,c)=>{u[c]=e}),u},S1=async o=>{let u=A1(o),e={},c=Object.entries(u);return await $c(c,async([f,i])=>{let h=i instanceof Blob,p={value:h?await Oe(i):i,fileName:h?i.name:null};e[f]=p}),e},E1=async o=>{let u=new FormData,e=Object.entries(o);return await $c(e,async([c,f])=>{if(f.fileName){let i=await Ce(f.value);u.append(c,i,f.fileName)}else u.append(c,f.value)}),u},Zc=async o=>{let u={...o};return u.data&&u.data instanceof FormData&&(u.data=await S1(u.data)),u},Yc=async o=>{let u={...o};return u.data&&_1(u.data)&&(u.data=await E1(u.data)),u},Xc=async o=>{let u={...o},e=u.config.responseType,c=u.request.responseType,f=e??c;if(f)switch(f){case"arraybuffer":u.data=x1(u.data);break;case"blob":u.data=await Oe(u.data);break;case"document":throw new Error(mi);case"stream":throw new Error(mi);default:break}return u},Qc=async o=>{let u={...o},e=u.config.responseType,c=u.request.responseType,f=e??c;if(f)switch(f){case"arraybuffer":u.data=m1(u.data);break;case"blob":u.data=await Ce(u.data);break;case"document":throw new Error(mi);case"stream":throw new Error(mi);default:break}return u},k1=Hc(d1(),1),C1="Upload file is not correctly serialised with base64",O1="Send callback of upload() method so processMessage can resolve the emitter",T1=async({file:o,filename:u})=>{if((0,k1.default)(o,{mimeRequired:!0})){let e=await Ce(o);return{file:new File([e],u),filename:u}}throw new Error(C1)},I1=(o,u)=>{o.on("queued",()=>u({uploadStatus:"queued"})),o.on("uploading",e=>u({uploadStatus:"uploading",data:e})),o.on("processing",()=>u({uploadStatus:"processing"})),o.on("success",e=>u({uploadStatus:"success",data:e})),o.on("failed",e=>u({uploadStatus:"failed",data:e}))},tf=async(o,u,e)=>{let c=await T1(o),f=await u(c);I1(f,e),e(O1)},wb=Hc(v1(),1);import{SDM_SCHEMAS as ab}from"@showpad/experience-app-types";var Cn={};xu(Cn,{SDK_VERSION:()=>ia,addAssetsToCollection:()=>ay,addAssetsToCollectionWithId:()=>cy,addAssetsToCollections:()=>sy,addAssetsToSharedSpace:()=>ly,addAssetsToSharedSpaces:()=>hy,clearCollection:()=>fy,createCollection:()=>uy,createStore:()=>N_,deleteGlobalStoreEntry:()=>W_,deleteStoreEntry:()=>q_,displayModal:()=>vy,displayToast:()=>py,enrichAssets:()=>il,getApiInstance:()=>H_,getAppContext:()=>Ar,getAssetFile:()=>B_,getAssetFileUrl:()=>Fu,getAssetPreview:()=>z_,getAssetPreviewUrl:()=>ju,getAssetsByQuery:()=>ny,getAssetsByTags:()=>ry,getAssetsInFolder:()=>ey,getCollections:()=>iy,getDeviceInfo:()=>Q1,getGlobalStoreEntries:()=>Sn,getGlobalStoreEntryValue:()=>sa,getSalesforceApi:()=>Bu,getSalesforceInstance:()=>J_,getShowpadApi:()=>pn,getShowpadInstance:()=>Sr,getShowpadOAuthApi:()=>Zi,getShowpadOAuthApiInteractive:()=>oa,getShowpadOAuthInstance:()=>K_,getShowpadOAuthInstanceInteractive:()=>$_,getStoreEntries:()=>P_,getStoreEntryValue:()=>M_,getUserInfo:()=>qr,getVersion:()=>X1,handleErrorWithToast:()=>j_,hasFeature:()=>nr,isAdmin:()=>D_,onShowpadLibLoaded:()=>I_,openAssetViewer:()=>R_,openCollection:()=>oy,openShowpadUrl:()=>Tu,parseConfig:()=>nl,parseEnrichedConfig:()=>F_,refreshSalesforceApi:()=>Nu,refreshShowpadApi:()=>zu,refreshShowpadOAuthApi:()=>An,requestOnShowpadInstance:()=>Cu,setDebug:()=>ff,setGlobalStoreEntryValue:()=>G_,setStoreEntryValue:()=>V_,share:()=>ty,showpadize:()=>ib,trackEvent:()=>Ui,trackExperienceEvent:()=>U_,trackExperiencePageview:()=>L_,upload:()=>dy});import{isV3Token as B1,isApiConfig as N1}from"@showpad/experience-app-types";import P1 from"axios";var R1=/^https:\/\/([^-][a-zA-Z0-9-]+)?(\.staging)?\.showpad\.(biz|com)(:d{1,5})?/,D1=/^\/data\/user\/\d+\/com\.showpad(\.(debug|alpha))?\/files\/AccountData-(production|staging)-\d+(-\d+)?\/((exp-[0-9a-f]{32}|\d+.v\d+)|personalcontent\/\d+)\/res\/index.html$/,rf=function(o){return R1.test(o)},ef=function(o){return D1.test(o)};var Su="showpadize",L1=function(){return window.name.startsWith(Su)},U1=function(){return window.location.hostname==="localhost"&&(window.location.pathname.startsWith("/experienceapp/exp-")||window.location.pathname.startsWith("/webcontent/"))},j1=function(){return ef(window.location.pathname)},F1=function(o){return rf(o)},z1=function(){return window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.protocol==="file:"},nf=function(){return z1()?"development":"external"},Ar=function(){try{if(L1())return"showpadize";if(U1()||j1())return"production";var o=parent.document.querySelector("iframe");if(o){var u=new URL(o.src).origin;if(F1(u))return"production"}}catch(e){return nf()}return nf()},Ai=function(){return Ar()==="development"};var Si=function(){return Si=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Si.apply(this,arguments)},Vr=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Mr=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},V1={v3:function(o,u){return"https://".concat(o,".showpad.").concat(u,"/api/v3")},coach:function(o,u){return"https://".concat(o,".showpad.").concat(u,"/api/learn/reporting/v3/json")},v4:function(o){return"https://".concat(o,".api.showpad.com/v4")}},dn=!1,Eu=[],M1=function(o){return new Promise(function(u){setTimeout(function(){u(!0)},o)})},of=function(o,u){var e=/(?:http[s]*:\/\/)*(.*?)\.(?=[^/]*\..{2,5})showpad.(com|biz)/i,c=u.url.match(e)[1],f=u.url.match(e)[2];return V1[o](c,f)},uf=function(o,u,e){Eu.forEach(function(c){o?c.reject(o):c.resolve({baseURL:u,authorization:e})}),Eu=[]},q1=function(o){return Vr(void 0,void 0,void 0,function(){return Mr(this,function(u){return[2,Cu(o)]})})},G1=function(o){return Si(Si({},o),{adapter:q1})},af=function(){function o(u){var e=this;this.axiosInstance=null,this.getApiRequestConfigInterceptor=function(c){return Vr(e,void 0,void 0,function(){var f,i,h;return Mr(this,function(p){switch(p.label){case 0:if(f=c,c.skipAuthRefresh)return[3,3];p.label=1;case 1:return dn?[4,M1(100)]:[3,3];case 2:return p.sent(),[3,1];case 3:return[4,this.params.getApi()];case 4:return i=p.sent(),h=this.params.postGetApi(i),f.headers||(f.headers={}),f.baseURL=h.url,f.headers.Authorization="Bearer ".concat(h.accessToken),[2,f]}})})},this.refreshApiRequestConfigInterceptor=function(c){return Vr(e,void 0,void 0,function(){var f,i,h,p,_,a,g=this;return Mr(this,function(A){switch(A.label){case 0:if(f=c.config,dn)return[2,new Promise(function(N,H){Eu.push({resolve:N,reject:H})}).then(function(N){var H=N.baseURL,j=N.authorization;return f.baseURL=H,f.headers.Authorization=j,g.axiosInstance.request(f)}).catch(function(){return Promise.reject(c)})];if(c.status!==401)return[3,4];A.label=1;case 1:return A.trys.push([1,3,,4]),dn=!0,[4,this.params.refreshApi()];case 2:return i=A.sent(),h=this.params.postRefreshApi(i),p=h.url,_="Bearer ".concat(h.accessToken),f.baseURL=p,f.headers.Authorization=_,dn=!1,uf(null,p,_),[2,this.axiosInstance.request(f)];case 3:return a=A.sent(),dn=!1,uf(c,null,null),[2,Promise.reject(c)];case 4:return[2,Promise.reject(c)]}})})},this.getInstance=function(){return Vr(e,void 0,void 0,function(){return Mr(this,function(c){return this.axiosInstance||(this.axiosInstance=P1.create(),this.axiosInstance.interceptors.request.use(this.getApiRequestConfigInterceptor),this.axiosInstance.interceptors.response.use(function(f){return f},this.refreshApiRequestConfigInterceptor),Ar()!=="production"&&this.axiosInstance.interceptors.request.use(G1,null,{synchronous:!0})),[2,this.axiosInstance]})})},this.params=u}return o}();var ku=function(o,u,e){var c=function(h){var p=h;return e&&!p.url.startsWith(e)&&(p.url="".concat(e).concat(p.url)),p},f=function(h){var p=h;return e&&!p.url.startsWith(e)&&(p.url="".concat(e).concat(p.url)),p},i=new af({getApi:o,postGetApi:c,refreshApi:u,postRefreshApi:f}).getInstance();return i},Ei=function(o,u,e,c){var f=function(p){var _=p;return e&&(_.url=of(e,_)),c&&(_.accessToken=c),_},i=function(p){var _=p;if(e&&(_.url=of(e,_)),c)throw new Error("Custom token is not authorized");return _},h=new af({getApi:o,postGetApi:f,refreshApi:u,postRefreshApi:i}).getInstance();return h},ki=function(o){return{accessToken:o.access_token,url:o.instance_url,scope:o.scope.split(" ")}},ae=function(){return new Date(new Date().toISOString()).getTime()},mt=function(o){var u="".concat(o,"-concurrent");sessionStorage.removeItem(u)},W1=function(o){return Vr(void 0,void 0,void 0,function(){var u;return Mr(this,function(e){switch(e.label){case 0:return[4,qr()];case 1:return u=e.sent(),[2,localStorage.getItem("".concat(o,".").concat(u.id))]}})})},Te=function(o,u){return Vr(void 0,void 0,void 0,function(){var e;return Mr(this,function(c){switch(c.label){case 0:return[4,qr()];case 1:return e=c.sent(),localStorage.setItem("".concat(o,".").concat(e.id),u),[2]}})})},vn=function(o){return Vr(void 0,void 0,void 0,function(){var u,e,c,f,i,h;return Mr(this,function(p){switch(p.label){case 0:return[4,W1(o)];case 1:if(u=p.sent(),u){if(e=JSON.parse(u),c=e.request_date,f=e.expires_in,i=ae(),h=c+f*1e3<i,!h){if(N1(e))return[2,e];if(B1(e))return[2,ki(e)]}return[2,"expired"]}return[2,"unavailable"]}})})},Ie=function(o,u){return Vr(void 0,void 0,void 0,function(){var e,c,f,i;return Mr(this,function(h){switch(h.label){case 0:return e="".concat(o,"-concurrent"),c=sessionStorage.getItem(e),c?(f=10,i=function(){return new Promise(function(p){var _=function(){c=sessionStorage.getItem(e),c?setTimeout(_,f):p()};_()})},[4,i()]):[3,2];case 1:return h.sent(),[2,vn(u)];case 2:return sessionStorage.setItem(e,JSON.stringify(!0)),[2,"unavailable"]}})})};var Ou=/^(showpad):\/\/(file|profile|video|folder)/,sf="Url is not valid (https://help.showpad.com/hc/en-us/articles/211957029-Showpad-URL-scheme-requirements)",cf=function(){window.addEventListener("click",function(o){var u=o.target;if(u instanceof HTMLAnchorElement){var e=u;Ou.test(e.href)&&(o.preventDefault(),o.stopPropagation(),Tu(e.href))}})};var Iu={debug:!1},ff=function(o){o===void 0&&(o=!0),Iu.debug=o;var u="Debug mode has been activated. All functions will be executed. Make sure to not use debug mode in production.";Iu.debug&&console.warn(u)},Ci=function(){return Iu.debug};import{mapValues as Ru,keyBy as K1}from"lodash-es";var Gr=function(){return Gr=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Gr.apply(this,arguments)},H1=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},J1=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},$1=function(o,u){return o===u?u.replace(/\.[^/.]+$/,""):u},lf=function(o){if(typeof o=="string")return{value:o};if(typeof o=="object")return"value"in o?o:Ru(o,lf);throw new Error("Unable to transform the Labels")},hf=function(o){return{id:o.id,email:o.email,userName:o.user_name,fullName:o.full_name}},df=function(o){return!!o},Oi=function(o){var u;return Gr(Gr({},o),{description:(u=o.description)!==null&&u!==void 0?u:"",displayName:$1(o.name,o.displayName),createdAt:o.createdAt?new Date(o.createdAt):new Date,updatedAt:o.updatedAt?new Date(o.updatedAt):new Date,expiresAt:o.expiresAt?new Date(o.expiresAt):null})},Ti=function(o){return o.map(Oi)},Ii=function(o){var u=o.labels,e=o.contents,c=o.assets;Array.isArray(u)&&!u.length&&(u={}),Array.isArray(e)&&!e.length&&(e={}),(Array.isArray(c)&&!c.length||!c)&&(c={});var f=c,i=Ru(f,Oi),h=Ru(u,lf),p={contents:e,labels:h,assets:i};return p},vf=function(o,u){return H1(void 0,void 0,void 0,function(){var e,c,f,i,h,p,_;return J1(this,function(a){switch(a.label){case 0:return e=o.labels,c=o.contents,f=o.assets,i=Object.values(f),[4,u(i)];case 1:return h=a.sent(),p=K1(h,"id"),_={labels:e,contents:c,assets:p},[2,_]}})})},Z1=function(o){return!Number.isNaN(parseFloat(o))&&Number.isFinite(o)},Du=function(o){try{return JSON.parse(o),!0}catch(u){return!1}},pf=function(o){return typeof o=="object"||Array.isArray(o)?ue(o):o.toString()},Ri=function(o){return Du(o)?er(o):Z1(o)?parseFloat(o)-parseInt(o,10)===0?parseInt(o,10):parseFloat(o):o==="true"?!0:o==="false"?!1:o},Lu=function(o){return Gr(Gr({},o),{value:Ri(o.value)})},se=function(o){return o.toString()},gf=function(o){return o.map(se)},wf=function(o){return o.map(function(u){return Gr(Gr({},u),{id:se(u.id)})})};import O_ from"axios";var yf={name:"@showpad/experience-app-sdk",version:"2.2.1",description:"Experience App SDK",type:"module",exports:"./lib/index.js",types:"./lib/index.d.ts",author:"Platform Solutions <platformsolutions@showpad.com>",license:"BSD-2-Clause",files:["lib","CHANGELOG.md"],scripts:{clean:"run-p clean:ts clean:lib clean:bundle","clean:ts":"rimraf ts","clean:lib":"rimraf lib","clean:bundle":"rimraf bundle",prewatch:"run-s clean",watch:"run-s build:ts && run-p watch:ts watch:js","watch:ts":"tsc -w","watch:js":"ts-node-esm ./scripts/build.ts watch",prebuild:"run-s clean",build:"run-p build:module build:cdn","build:module":"run-s build:ts build:js","build:ts":"tsc","build:js":"ts-node-esm ./scripts/build.ts","build:cdn":"webpack",postbuild:"run-s clean:ts","bundle:tag":"ts-node-esm ./scripts/createBuildVersionForTag.ts",lint:"eslint .","lint:fix":"eslint . --fix",format:"prettier --check --loglevel warn .","format:fix":"prettier --write --loglevel warn .",pretest:"run-s clean",test:"vitest run","test:watch":"vitest","test:coverage":"vitest run --coverage",doc:"typedoc",postdoc:"run-s format:fix","packages:check":"npm-check-updates -x esbuild,esbuild-plugin-filesize,vitest,axios","packages:fix":"npm-check-updates -i -u -x esbuild,esbuild-plugin-filesize,vitest,axios",prepare:"husky install"},dependencies:{"@showpad/experience-app-types":"0.0.2",ajv:"8.12.0",axios:"1.2.1","core-js":"3.27.2",events:"3.3.0","json-schema":"0.4.0","lodash-es":"4.17.21",md5:"2.3.0","p-each-series":"3.0.0","query-string":"8.1.0","serialize-error":"11.0.0",uuid:"9.0.0"},devDependencies:{"@babel/core":"7.20.12","@babel/preset-env":"7.20.2","@showpad/experience-app-internal":"2.0.1","@tsconfig/esm":"1.0.2","@types/events":"3.0.0","@types/lodash-es":"4.17.6","@types/md5":"2.3.2","@types/uuid":"9.0.0","@typescript-eslint/eslint-plugin":"5.48.2","@typescript-eslint/parser":"5.48.2","babel-loader":"9.1.2",c8:"7.12.0",esbuild:"0.16.17","esbuild-node-externals":"1.6.0","esbuild-plugin-filesize":"0.3.0",eslint:"8.32.0","eslint-config-airbnb-base":"15.0.0","eslint-config-prettier":"8.6.0","eslint-plugin-import":"2.27.5","eslint-plugin-prettier":"4.2.1",husky:"8.0.3",jsdom:"21.0.0","lint-staged":"13.1.0","npm-check-updates":"16.6.2","npm-run-all":"4.1.5",prettier:"2.8.3","recursive-copy":"2.0.14",rimraf:"4.1.1","ts-loader":"9.4.2","ts-node":"10.9.1","type-fest":"3.5.2",typedoc:"0.23.24",typescript:"4.9.4",vite:"4.0.4",vitest:"0.25.8",webpack:"5.75.0","webpack-cli":"5.0.1"},engines:{node:">=15.0.0"}};var Di=yf;import gy from"md5";import{isV3Error as wy}from"@showpad/experience-app-types";var st="This method is not supported on your device",Uu="This device is not supported by the Experience App SDK",_f="This method is not supported in the Showpad JS version running on your device",bf="This method is supported in the Showpad JS version running on your device, but not yet by the Experience App SDK",Li="This method is not supported on your device while offline",mf="The password modal was dismissed. Called Showpad.getShowpadOAuthApiInteractive() or Showpad.getShowpadOAuthInstanceInteractive() method will not work",xf="Undefined is not a valid entryValue";var tt=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},rt=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},X1=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("getVersion")]})})},qr=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("getUserInfo")]})})},Q1=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("getDeviceInfo")]})})},nr=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("hasFeature",o)]})})},Ui=function(o){U("trackEvent",o)},ty=function(o,u){return tt(void 0,void 0,void 0,function(){var e;return rt(this,function(c){switch(c.label){case 0:return e=o==="email"?"shareEmail":"shareLink",[4,nr(e)];case 1:if(!c.sent())throw new Error(st);return[2,U("share",o,u)]}})})},ju=function(o,u,e){return tt(void 0,void 0,void 0,function(){return rt(this,function(c){return[2,U("getAssetPreviewUrl",o,u,e)]})})},Fu=function(o,u){return tt(void 0,void 0,void 0,function(){return rt(this,function(e){return[2,U("getAssetFileUrl",o,u)]})})},ry=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("getAssetsByTags",o)]})})},ey=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("getAssetsInFolder",o)]})})},ny=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("getAssetsByQuery",o)]})})},iy=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){switch(o.label){case 0:return[4,nr("collections")];case 1:if(!o.sent())throw new Error(st);return[2,U("getCollections")]}})})},oy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("collections")];case 1:if(!u.sent())throw new Error(st);return U("openCollection",o),[2]}})})},uy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("collections")];case 1:if(!u.sent())throw new Error(st);return[2,U("createCollection",o)]}})})},ay=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("collections")];case 1:if(!u.sent())throw new Error(st);return[2,U("addAssetsToCollection",o)]}})})},sy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("collections")];case 1:if(!u.sent())throw new Error(st);return[2,U("addAssetsToCollections",o)]}})})},cy=function(o,u){return tt(void 0,void 0,void 0,function(){return rt(this,function(e){switch(e.label){case 0:return[4,nr("collections")];case 1:if(!e.sent())throw new Error(st);return[2,U("addAssetsToCollectionWithId",o,u)]}})})},fy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("collections")];case 1:if(!u.sent())throw new Error(st);return U("clearCollection",o),[2]}})})},ly=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("sharedSpaces")];case 1:if(!u.sent())throw new Error(st);return[2,U("addAssetsToSharedSpace",o)]}})})},hy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){switch(u.label){case 0:return[4,nr("sharedSpaces")];case 1:if(!u.sent())throw new Error(st);return[2,U("addAssetsToSharedSpaces",o)]}})})},pn=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("getShowpadApi")]})})},zu=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("refreshShowpadApi")]})})},Bu=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("getSalesforceApi")]})})},Nu=function(){return tt(void 0,void 0,void 0,function(){return rt(this,function(o){return[2,U("refreshSalesforceApi")]})})},dy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("upload",o)]})})},vy=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("displayModal",o)]})})},py=function(o){return tt(void 0,void 0,void 0,function(){return rt(this,function(u){return[2,U("displayToast",o)]})})};var ji=function(){return ji=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},ji.apply(this,arguments)},gn=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},wn=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},yy=function(o){return gn(void 0,void 0,void 0,function(){var u;return wn(this,function(e){switch(e.label){case 0:return[4,pn()];case 1:return u=e.sent(),[2,ji(ji({},o),{instance_url:u.url})]}})})},Fi=function(o,u){return"".concat(gy("".concat(o).concat(u)))},Pu=function(o){return gn(void 0,void 0,void 0,function(){var u,e,c,f,i;return wn(this,function(h){switch(h.label){case 0:return[4,Sr("v3")];case 1:return u=h.sent(),e={skipAuthRefresh:!0},[4,u.post("oauth2/token",o,e)];case 2:if(c=h.sent(),f=c.data,wy(f))throw i="".concat(f.error,": ").concat(f.error_description),new Error(i);return[2,yy(f)]}})})},Af=function(o,u){return gn(void 0,void 0,void 0,function(){return wn(this,function(e){return[2,new Promise(function(c,f){var i="showpad-sdk-oauth-user-password",h=function(j){var G;if((G=document.getElementById(i))===null||G===void 0||G.remove(),j){var B="".concat(o,"-concurrent");sessionStorage.removeItem(B),f(new Error(mf))}},p=function(j){c(j),h(!1)},_=function(){var j,G="",B=document.createElement("p");return B.innerHTML=(u==null?void 0:u.description)||"For this operation you need to enter your password.",B.setAttribute("style","".concat(G).concat((j=u==null?void 0:u.descriptionStyle)!==null&&j!==void 0?j:"")),B},a=function(){var j,G="border:1px solid #000;width:200px;",B=document.createElement("input");return B.type="password",B.autocomplete="current-password",B.placeholder=(u==null?void 0:u.placeholder)||"Enter Showpad password",B.setAttribute("style","".concat(G).concat((j=u==null?void 0:u.inputStyle)!==null&&j!==void 0?j:"")),B.onkeyup=function(yt){yt.key==="Enter"&&p(B.value)},B},g=function(){return gn(void 0,void 0,void 0,function(){var j,G;return wn(this,function(B){switch(B.label){case 0:return[4,qr()];case 1:return j=B.sent(),G=document.createElement("input"),G.hidden=!0,G.type="text",G.autocomplete="username",G.value=j.userName,[2,G]}})})},A=function(j){var G,B,yt="border:1px solid #000;margin-left:10px;",$t=document.createElement("button");return $t.innerText=(G=u==null?void 0:u.buttonText)!==null&&G!==void 0?G:"OK",$t.type="button",$t.setAttribute("style","".concat(yt).concat((B=u==null?void 0:u.buttonStyle)!==null&&B!==void 0?B:"")),$t.onclick=function(){return p(j.value)},$t},N=function(){var j,G="position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.32);z-index: 999999999;text-align:center;",B=document.createElement("div");return B.setAttribute("id",i),B.setAttribute("style","".concat(G).concat((j=u==null?void 0:u.containerStyle)!==null&&j!==void 0?j:"")),B.onclick=function(){return h(!0)},B.onkeyup=function(yt){yt.key==="Escape"&&h(!0)},B},H=function(){return gn(void 0,void 0,void 0,function(){var j,G,B,yt,$t,lt,ar,Lt,sr;return wn(this,function(Pt){switch(Pt.label){case 0:return j=_(),G=a(),[4,g()];case 1:return B=Pt.sent(),yt=A(G),$t="position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;padding:10px;",lt=document.createElement("form"),lt.appendChild(j),lt.appendChild(B),lt.appendChild(G),lt.appendChild(yt),lt.setAttribute("style","".concat($t).concat((sr=u==null?void 0:u.formStyle)!==null&&sr!==void 0?sr:"")),lt.onclick=function($r){return $r.stopPropagation()},ar=N(),ar.appendChild(lt),Lt=document.getElementsByTagName("body")[0],Lt.appendChild(ar),G.focus(),[2]}})})};H()})]})})};var _y=["isAdmin","createStore","getShowpadOAuthApi","getShowpadOAuthApiInteractive","refreshShowpadOAuthApi","getShowpadInstance","getSalesforceInstance","setGlobalStoreEntryValue","deleteGlobalStoreEntry"],by=function(o){var u=navigator.onLine;if(!u&&_y.includes(o))throw new Error(Li)},Er=function(o){Ci()||by(o)},Vu=function(o){if(o===void 0)throw new Error(xf)};import{EventEmitter as w_}from"events";import y_ from"axios";import{v4 as __}from"uuid";import{deserializeError as b_,serializeError as m_}from"serialize-error";import{hasUploadStatus as x_}from"@showpad/experience-app-types";var Ji={};xu(Ji,{addAssetsToCollection:()=>Jy,addAssetsToCollectionWithId:()=>$y,addAssetsToCollections:()=>Ky,addAssetsToSharedSpace:()=>Yy,addAssetsToSharedSpaces:()=>Xy,clearCollection:()=>Zy,createCollection:()=>Hy,deleteStoreEntry:()=>v_,displayModal:()=>r_,displayToast:()=>ra,getAssetFile:()=>f_,getAssetFileUrl:()=>Xu,getAssetPreview:()=>c_,getAssetPreviewUrl:()=>Yu,getAssetsByQuery:()=>Gy,getAssetsByTags:()=>My,getAssetsInFolder:()=>qy,getCollections:()=>Jf,getDeviceInfo:()=>Le,getGlobalStoreEntries:()=>p_,getGlobalStoreEntryValue:()=>g_,getSalesforceApi:()=>Qy,getShowpadApi:()=>ta,getStoreEntries:()=>l_,getStoreEntryValue:()=>d_,getUserInfo:()=>Ny,getVersion:()=>Dy,handleErrorWithToast:()=>a_,hasFeature:()=>ur,onShowpadLibLoaded:()=>i_,openAssetViewer:()=>u_,openCollection:()=>Wy,openShowpadUrl:()=>tl,parseConfig:()=>o_,refreshSalesforceApi:()=>Qf,refreshShowpadApi:()=>Xf,requestOnShowpadInstance:()=>s_,setStoreEntryValue:()=>h_,share:()=>Vy,trackEvent:()=>Py,upload:()=>t_});import e_ from"query-string";import ea from"axios";import{EventEmitter as By}from"events";import Ef from"axios";import{isAppsDbHttpError as kf,isCustomToken as my}from"@showpad/experience-app-types";var yn=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},_n=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Re="call didn't go through",gt="null was returned, something went wrong",zi=function(o,u){var e=o.bind(window.ShowpadLib);if(!e(u))throw new Error(Re)},Bi=function(o,u,e){return yn(void 0,void 0,void 0,function(){return _n(this,function(c){return[2,new Promise(function(f,i){var h=function(_){_?f(e?e(_):_):i(new Error(u))},p=o.bind(window.ShowpadLib);p(h)||i(new Error(Re))})]})})},kr=function(o,u,e,c){return yn(void 0,void 0,void 0,function(){return _n(this,function(f){return[2,new Promise(function(i,h){var p=function(a){a?i(c?c(a):a):h(new Error(e))},_=u.bind(window.ShowpadLib);_(o,p)||h(new Error(Re))})]})})},Mu=function(o,u,e){return yn(void 0,void 0,void 0,function(){return _n(this,function(c){return[2,new Promise(function(f,i){var h=function(_,a){_?i(_):f(e?e(a):a)},p=u.bind(window.ShowpadLib);p(o,h)||i(new Error(Re))})]})})},Wr=function(o,u,e,c,f){return yn(void 0,void 0,void 0,function(){return _n(this,function(i){return[2,new Promise(function(h,p){var _=function(g){g?h(f?f(g):g):p(new Error(c))},a=e.bind(window.ShowpadLib);a(o,u,_)||p(new Error(Re))})]})})},Sf=function(o,u,e,c,f,i){return yn(void 0,void 0,void 0,function(){return _n(this,function(h){return[2,new Promise(function(p,_){var a=function(A){A?p(i?i(A):A):_(new Error(f))},g=c.bind(window.ShowpadLib);g(o,u,e,a)||_(new Error(Re))})]})})};var ir=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},or=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ni=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},Pi=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},xy={user:"users",global:"globals"},Ay="Passing a custom token is deprecated and will not be allowed in the future. In future versions only an AxiosInstance will be allowed. This AxiosInstance should be retrieved with getShowpadOAuthInstance() or getShowpadOAuthInstanceInteractive()",qu="AppsDB store could not be found. There is a bug on IOS & ANDROID that also returns this error when the store doesn't contain entries. Handle this error gracefully on IOS & ANDROID in a catch statement if you're sure the given store exists.",De="AppsDB entry could not be found.",Gu=function(o,u,e){return ir(void 0,void 0,void 0,function(){var c,f,i,h;return or(this,function(p){switch(p.label){case 0:return c=[],f={cursor:e},[4,Wr(o,f,u,qu)];case 1:return i=p.sent(),i.entries.length>0&&c.push.apply(c,Pi([],Ni(i.entries),!1)),i.cursor?[4,Gu(o,u,i.cursor)]:[3,3];case 2:h=p.sent(),c.push.apply(c,Pi([],Ni(h),!1)),p.label=3;case 3:return[2,c]}})})},Cf=function(o,u,e){return ir(void 0,void 0,void 0,function(){var c,f,i,h,p,_,a,g;return or(this,function(A){switch(A.label){case 0:return c=[],f={cursor:e},[4,Sr("v3")];case 1:i=A.sent(),A.label=2;case 2:return A.trys.push([2,6,,7]),[4,i.get("/appsdb/stores/".concat(o,"/").concat(xy[u],"/entries"),{params:f})];case 3:return h=A.sent(),p=h.data,p.entries.length>0&&c.push.apply(c,Pi([],Ni(p.entries),!1)),p.cursor?[4,Cf(o,u,p.cursor)]:[3,5];case 4:_=A.sent(),c.push.apply(c,Pi([],Ni(_),!1)),A.label=5;case 5:return[2,c];case 6:throw a=A.sent(),Ef.isAxiosError(a)&&((g=a.response)===null||g===void 0?void 0:g.status)===404?new Error(qu):kf(a)&&a.status===404?new Error(qu):a;case 7:return[2]}})})},Vi=function(o){return ir(void 0,void 0,void 0,function(){return or(this,function(u){return my(o)?(console.warn(Ay),[2,Sr("v3",o)]):[2,o]})})},Of=function(o){return Gu(o,window.ShowpadLib.getStoreEntries)},Tf=function(o,u,e){return ir(void 0,void 0,void 0,function(){return or(this,function(c){return[2,Sf(o,u,e,window.ShowpadLib.setStoreEntryValue,gt)]})})},If=function(o,u){return ir(void 0,void 0,void 0,function(){var e;return or(this,function(c){switch(c.label){case 0:return[4,Wr(o,u,window.ShowpadLib.getStoreEntryValue,De)];case 1:return e=c.sent(),[2,e]}})})},Rf=function(o,u){return ir(void 0,void 0,void 0,function(){return or(this,function(e){return[2,Wr(o,u,window.ShowpadLib.deleteStoreEntry,gt)]})})},Df=function(o){var u=navigator.onLine,e=u?Cf(o,"global"):Gu(o,window.ShowpadLib.getGlobalStoreEntries);return e},Lf=function(o,u,e,c){return ir(void 0,void 0,void 0,function(){var f;return or(this,function(i){switch(i.label){case 0:return[4,Vi(c)];case 1:return f=i.sent(),[4,f.put("/appsdb/stores/".concat(o,"/globals/entries/").concat(u),{value:e},{responseType:"json"})];case 2:return i.sent(),[2]}})})},Sy=function(o,u){return ir(void 0,void 0,void 0,function(){return or(this,function(e){return[2,Wr(o,u,window.ShowpadLib.getGlobalStoreEntryValue,De)]})})},Ey=function(o,u){return ir(void 0,void 0,void 0,function(){var e,c,f,i;return or(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),[4,Sr("v3")];case 1:return e=h.sent(),[4,e.get("/appsdb/stores/".concat(o,"/globals/entries/").concat(u))];case 2:return c=h.sent(),[2,c.data.value];case 3:throw f=h.sent(),Ef.isAxiosError(f)&&((i=f.response)===null||i===void 0?void 0:i.status)===404?new Error(De):kf(f)&&f.status===404?new Error(De):f;case 4:return[2]}})})},Uf=function(o,u){return ir(void 0,void 0,void 0,function(){var e,c;return or(this,function(f){return e=navigator.onLine,c=e?Ey(o,u):Sy(o,u),[2,c]})})},jf=function(o,u,e){return ir(void 0,void 0,void 0,function(){var c;return or(this,function(f){switch(f.label){case 0:return[4,Vi(e)];case 1:return c=f.sent(),[4,c.delete("/appsdb/stores/".concat(o,"/globals/entries/").concat(u))];case 2:return f.sent(),[2]}})})};import qi from"p-each-series";var Mi=function(){return Mi=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Mi.apply(this,arguments)},Et=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},kt=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ky=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},Cy=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},Wu=40,Ff=25e4,zf="_CHUNK_",Oy=Wu*Ff,Ty=Array.from(Array(Wu).keys()).map(String),Iy="Maximum amount of ".concat(Oy," characters exceeded"),Hu=function(o,u){var e=u>0?"".concat(zf).concat(u):"",c="".concat(o).concat(e);return c},Gi=function(o,u){var e=new Map,c=new RegExp(".{1,".concat(Ff,"}"),"g"),f=pf(u),i=f.match(c)||[];if(i.length>Wu)throw new Error(Iy);return i.forEach(function(h,p){var _=Hu(o,p);e.set(_,h)}),e},Bf=function(o,u,e,c){return Et(void 0,void 0,void 0,function(){var f,i;return kt(this,function(h){switch(h.label){case 0:return f=Cy([],ky(u.keys()),!1),i=function(p){return Et(void 0,void 0,void 0,function(){var _;return kt(this,function(a){return _=u.get(p),_?[2,c==="user"?Tf(o,p,_):Lf(o,p,_,e)]:[2,Promise.resolve()]})})},[4,qi(f,i)];case 1:return h.sent(),[2]}})})},Nf=function(o,u){return Et(void 0,void 0,void 0,function(){return kt(this,function(e){return[2,Bf(o,u,"user","user")]})})},Pf=function(o,u,e){return Et(void 0,void 0,void 0,function(){return kt(this,function(c){return[2,Bf(o,u,e,"global")]})})},Ry=function(o,u){return function(e){var c,f=function(i){var h=Hu(e.id,i),p=o.get(h);if(p){var _=o.get(e.id);o.set(e.id,"".concat(_).concat(p)),o.delete(h),f(i+1)}};e.id.includes(zf)||(f(1),u.push(Mi(Mi({},e),{value:(c=o.get(e.id))!==null&&c!==void 0?c:e.value})))}},Vf=function(o,u){return Et(void 0,void 0,void 0,function(){var e,c,f;return kt(this,function(i){switch(i.label){case 0:return e=[],c=new Map,[4,u==="user"?Of(o):Df(o)];case 1:return f=i.sent(),f.forEach(function(h){c.set(h.id,h.value)}),f.forEach(Ry(c,e)),[2,e]}})})},Mf=function(o){return Et(void 0,void 0,void 0,function(){return kt(this,function(u){return[2,Vf(o,"user")]})})},qf=function(o){return Et(void 0,void 0,void 0,function(){return kt(this,function(u){return[2,Vf(o,"global")]})})},Gf=function(o,u,e){return Et(void 0,void 0,void 0,function(){var c,f,i,h,p,_;return kt(this,function(a){switch(a.label){case 0:return c=new Map,f=Ty.map(function(g,A){return Hu(u,A)}),f.forEach(function(g){c.set(g,"")}),i=f.slice(0,2),h=f.slice(2),p=function(g){return Et(void 0,void 0,void 0,function(){var A,N;return kt(this,function(H){switch(H.label){case 0:return H.trys.push([0,2,,3]),[4,e==="user"?If(o,g):Uf(o,g)];case 1:return A=H.sent(),c.set(g,A),[2,A];case 2:if(N=H.sent(),N instanceof Error&&N.message!==De)throw N;return[2,qi.stop];case 3:return[2]}})})},_=i.map(p),[4,Promise.all(_)];case 1:return a.sent(),c.get(i[0])?c.get(i[1])?[4,qi(h,p)]:[3,3]:[2,null];case 2:a.sent(),a.label=3;case 3:return c.forEach(function(g,A){g.length||c.delete(A)}),[2,c]}})})},Wi=function(o,u){return Et(void 0,void 0,void 0,function(){return kt(this,function(e){return[2,Gf(o,u,"user")]})})},bn=function(o,u){return Et(void 0,void 0,void 0,function(){return kt(this,function(e){return[2,Gf(o,u,"global")]})})},Wf=function(o,u,e,c){return Et(void 0,void 0,void 0,function(){var f;return kt(this,function(i){switch(i.label){case 0:return f=function(h){return Et(void 0,void 0,void 0,function(){return kt(this,function(p){return[2,c==="user"?Rf(o,h):jf(o,h,e)]})})},[4,qi(u,f)];case 1:return i.sent(),[2]}})})},Ju=function(o,u){return Et(void 0,void 0,void 0,function(){return kt(this,function(e){return[2,Wf(o,u,"user","user")]})})},Ku=function(o,u,e){return Et(void 0,void 0,void 0,function(){return kt(this,function(c){return[2,Wf(o,u,e,"global")]})})};var Dy=function(){return typeof window.ShowpadLib.getVersion=="function"?window.ShowpadLib.getVersion():2},Le=function(){return window.ShowpadLib.getDeviceInfo()};var $u=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},Hi=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},Ly=new Map([["web",[]],["ios",[]],["android",[]]]),Zu=["getShowpadApi","refreshShowpadApi","getSalesforceApi","refreshSalesforceApi","addAssetsToSharedSpace","addAssetsToSharedSpaces"],Uy=new Map([["web",Hi(Hi([],$u(Zu),!1),["upload"],!1)],["ios",Hi([],$u(Zu),!1)],["android",Hi([],$u(Zu),!1)]]),jy=function(o){if(!window.ShowpadLib[o])throw new Error(_f)},Fy=function(o){var u=Le().app,e=Ly.get(u);if(!e)throw new Error(Uu);if(e.includes(o))throw new Error(bf)},zy=function(o){var u=navigator.onLine,e=Le().app,c=Uy.get(e);if(!c)throw new Error(Uu);if(!u&&c.includes(o))throw new Error(Li)},Y=function(o){Ci()||(jy(o),Fy(o),zy(o))};var Ue=function(){return Ue=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Ue.apply(this,arguments)},ot=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},ut=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ny=function(){return Y("getUserInfo"),hf(window.ShowpadLib.getUserInfo())},ur=function(o){return Y("hasFeature"),df(window.ShowpadLib.hasFeature(o))},Py=function(o){Y("trackEvent"),zi(window.ShowpadLib.trackEvent,o)},Vy=function(o,u){return ot(void 0,void 0,void 0,function(){var e;return ut(this,function(c){if(Y("share"),e=o==="email"?"shareEmail":"shareLink",!ur(e))throw new Error(st);return[2,Wr(o,u,window.ShowpadLib.share,gt)]})})},Yu=function(o,u,e){return Y("getAssetPreviewUrl"),window.ShowpadLib.getAssetPreviewUrl(o,u,e)},Xu=function(o,u){return Y("getAssetFileUrl"),window.ShowpadLib.getAssetFileUrl(o,u)},My=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){return Y("getAssetsByTags"),[2,kr(o,window.ShowpadLib.getAssetsByTags,gt,Ti)]})})},qy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){return Y("getAssetsInFolder"),[2,kr(o,window.ShowpadLib.getAssetsInFolder,gt,Ti)]})})},Gy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){return Y("getAssetsByQuery"),[2,kr(o,window.ShowpadLib.getAssetsByQuery,gt,Ti)]})})},Jf=function(){return ot(void 0,void 0,void 0,function(){return ut(this,function(o){if(Y("getCollections"),!ur("collections"))throw new Error(st);return[2,Bi(window.ShowpadLib.getCollections,gt,wf)]})})},Qu=function(o){return ot(void 0,void 0,void 0,function(){var u,e;return ut(this,function(c){switch(c.label){case 0:return[4,Jf()];case 1:return u=c.sent(),e=u.map(function(f){return f.id}),[2,e.includes(se(o))]}})})},Wy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){switch(u.label){case 0:if(Y("openCollection"),!ur("collections"))throw new Error(st);return[4,Qu(o)];case 1:if(!u.sent())throw new Error("Collection with id ".concat(o," not found"));return zi(window.ShowpadLib.openCollection,o),[2]}})})},Hy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){if(Y("createCollection"),!ur("collections"))throw new Error(st);return[2,kr(o,window.ShowpadLib.createCollection,gt,se)]})})},Jy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){if(Y("addAssetsToCollection"),!ur("collections"))throw new Error(st);return[2,kr(o,window.ShowpadLib.addAssetsToCollection,gt,se)]})})},Ky=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){if(Y("addAssetsToCollections"),!ur("collections"))throw new Error(st);return[2,Mu(o,window.ShowpadLib.addAssetsToCollections,gf)]})})},$y=function(o,u){return ot(void 0,void 0,void 0,function(){return ut(this,function(e){switch(e.label){case 0:if(Y("addAssetsToCollectionWithId"),!ur("collections"))throw new Error(st);return[4,Qu(o)];case 1:if(!e.sent())throw new Error("Collection with id ".concat(o," not found"));return[2,Wr(o,u,window.ShowpadLib.addAssetsToCollectionWithId,gt,se)]}})})},Zy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){switch(u.label){case 0:if(Y("clearCollection"),!ur("collections"))throw new Error(st);return[4,Qu(o)];case 1:if(!u.sent())throw new Error("Collection with id ".concat(o," not found"));return zi(window.ShowpadLib.clearCollection,o),[2]}})})},Yy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){if(Y("addAssetsToSharedSpace"),!ur("sharedSpaces"))throw new Error(st);return[2,kr(o,window.ShowpadLib.addAssetsToSharedSpace,gt)]})})},Xy=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){if(Y("addAssetsToSharedSpaces"),!ur("sharedSpaces"))throw new Error(st);return[2,Mu(o,window.ShowpadLib.addAssetsToSharedSpaces)]})})},Hf={getShowpadApi:{unavailable:"Access Token is not available",expired:"Access Token has expired"},refreshShowpadApi:{unavailable:"Refresh Token is not available",expired:"Refresh Token has expired, no further calls can be made"},getSalesforceApi:{unavailable:"Salesforce Access Token is not available. Possibly, the user is not connected to Salesforce.",expired:"Access Token has expired"},refreshSalesforceApi:{unavailable:"Salesforce Refresh Token is not available. Possibly, the user is not connected to Salesforce.",expired:"Salesforce Refresh Token has expired, no further calls can be made"}},Kf=3600,$f=function(o,u,e){return ot(void 0,void 0,void 0,function(){return ut(this,function(c){if(o.accessToken&&o.url)return[2,o];if(o.error)switch(o.error){case"expired":if(e)return[2,e()];throw new Error(Hf[u].expired);case"unavailable":throw new Error(Hf[u].unavailable);default:throw new Error("An unkown error was returned: ".concat(o.error))}throw new Error("Incomplete accessToken or url or no error was returned")})})},Zf=function(o,u){return ot(void 0,void 0,void 0,function(){var e,c,f,i,h,p;return ut(this,function(_){switch(_.label){case 0:return Y(o),[4,Ie(o,u)];case 1:if(e=_.sent(),e!=="expired"&&e!=="unavailable")return[2,e];_.label=2;case 2:return _.trys.push([2,6,,7]),[4,Bi(window.ShowpadLib[o],gt)];case 3:return c=_.sent(),f=ae(),[4,$f(c,o)];case 4:return i=_.sent(),h=Ue(Ue({},i),{expires_in:Kf,request_date:f}),[4,Te(u,JSON.stringify(h))];case 5:return _.sent(),mt(o),[2,i];case 6:throw p=_.sent(),mt(o),p;case 7:return[2]}})})},Yf=function(o,u,e){return ot(void 0,void 0,void 0,function(){var c,f,h,i,h,p,_,a,g;return ut(this,function(A){switch(A.label){case 0:return Y(o),[4,Ie(o,u)];case 1:return c=A.sent(),c!=="expired"&&c!=="unavailable"?[2,c]:[4,vn(u)];case 2:if(f=A.sent(),f!=="expired"&&f!=="unavailable")return mt(o),[2,f];if(f!=="expired")return[3,6];A.label=3;case 3:return A.trys.push([3,5,,6]),[4,e()];case 4:return h=A.sent(),mt(o),[2,h];case 5:return i=A.sent(),console.warn(i),[3,6];case 6:return A.trys.push([6,10,,11]),[4,Bi(window.ShowpadLib[o],gt)];case 7:return h=A.sent(),p=ae(),[4,$f(h,o,e)];case 8:return _=A.sent(),a=Ue(Ue({},_),{expires_in:Kf,request_date:p}),[4,Te(u,JSON.stringify(a))];case 9:return A.sent(),mt(o),[2,_];case 10:throw g=A.sent(),mt(o),g;case 11:return[2]}})})},Xf=function(){return ot(void 0,void 0,void 0,function(){return ut(this,function(o){return[2,Zf("refreshShowpadApi","showpadApiCache")]})})},ta=function(){return ot(void 0,void 0,void 0,function(){return ut(this,function(o){return[2,Yf("getShowpadApi","showpadApiCache",Xf)]})})},Qf=function(){return ot(void 0,void 0,void 0,function(){return ut(this,function(o){return[2,Zf("refreshSalesforceApi","salesforceApiCache")]})})},Qy=function(){return ot(void 0,void 0,void 0,function(){return ut(this,function(o){return[2,Yf("getSalesforceApi","salesforceApiCache",Qf)]})})},t_=function(o){Y("upload");var u=new By,e=window.ShowpadLib.upload(o);return e.on("queued",function(){return u.emit("queued")}),e.on("uploading",function(c){return u.emit("uploading",c)}),e.on("processing",function(){return u.emit("processing")}),e.on("success",function(c){return u.emit("success",{asset:Oi(c.asset)})}),e.on("failed",function(c){return u.emit("failed",c)}),u},r_=function(o){return ot(void 0,void 0,void 0,function(){var u,e;return ut(this,function(c){switch(c.label){case 0:Y("displayModal"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,kr(o,window.ShowpadLib.displayModal,gt)];case 2:return u=c.sent(),[3,4];case 3:if(e=c.sent(),e instanceof Error&&e.message!==gt)throw e;return u="cancel",[3,4];case 4:return[2,u]}})})},ra=function(o){return ot(void 0,void 0,void 0,function(){return ut(this,function(u){return Y("displayToast"),[2,kr(o,window.ShowpadLib.displayToast,gt)]})})};var je=function(){return je=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},je.apply(this,arguments)},ce=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},fe=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},n_=Di.version,na=function(o,u,e){return e===void 0&&(e=!0),ce(void 0,void 0,void 0,function(){var c,f,i;return fe(this,function(h){switch(h.label){case 0:return c=new XMLHttpRequest,c.open("GET",o),f=Le().app,f==="web"&&e?[4,ta()]:[3,2];case 1:i=h.sent().accessToken,c.setRequestHeader("Authorization","Bearer ".concat(i)),h.label=2;case 2:return[2,new Promise(function(p,_){c.onload=function(){c.status===200?p(c.response):_(new Error("".concat(c.status,": ").concat(c.statusText)))},c.onerror=function(){_(new Error("".concat(c.status,": ").concat(c.statusText)))},c.responseType=u,c.send()})]}})})},i_=function(o){return ce(void 0,void 0,void 0,function(){return fe(this,function(u){return[2,new Promise(function(e){var c=100,f=function(){var i=o===n_;window.ShowpadLib?e(i):setTimeout(f,c)};f()})]})})},o_=function(){return ce(void 0,void 0,void 0,function(){var o,u,e,c;return fe(this,function(f){switch(f.label){case 0:return o=window.location.search,u=new URLSearchParams(o).get("configUrl"),e=!Ai()&&u?u:"./config.json",[4,na(e,"json",!1)];case 1:return c=f.sent(),[2,Ii(c)]}})})},tl=function(o){if(!Ou.test(o))throw new Error(sf);var u=document.createElement("a");u.id="appLink",u.href=o,u.style.display="hidden",document.body.appendChild(u),u.click(),u.remove()},u_=function(o,u){var e=e_.stringify(je(je({},u),{modal:u.modal===!1?0:1}));tl("showpad://file/".concat(o,"?").concat(e))},a_=function(o){return ce(void 0,void 0,void 0,function(){return fe(this,function(u){return[2,ra({type:"error",text:o instanceof Error?o.message:"Something went wrong",actionText:"dismiss"})]})})},s_=function(o){return ce(void 0,void 0,void 0,function(){return fe(this,function(u){return[2,ea.request(je(je({},o),{transformRequest:ea.defaults.transformRequest,transformResponse:ea.defaults.transformResponse}))]})})},c_=function(o,u,e){return ce(void 0,void 0,void 0,function(){var c;return fe(this,function(f){return c=Yu(o,u,e),[2,na(c,"blob")]})})},f_=function(o,u){return ce(void 0,void 0,void 0,function(){var e;return fe(this,function(c){return e=Xu(o,u),[2,na(e,"blob")]})})};var Fe=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},ze=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},mn=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},xn=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},l_=function(o){return Fe(void 0,void 0,void 0,function(){var u,e;return ze(this,function(c){switch(c.label){case 0:return[4,Mf(o)];case 1:return u=c.sent(),e=u.map(function(f){return Lu(f)}),[2,e]}})})},h_=function(o,u,e){return Fe(void 0,void 0,void 0,function(){var c,f,i,h,p;return ze(this,function(_){switch(_.label){case 0:return Y("setStoreEntryValue"),c=Gi(u,e),f=xn([],mn(c.keys()),!1),[4,Wi(o,u)];case 1:return i=_.sent(),i?(h=xn([],mn(i.keys()),!1),p=h.filter(function(a){return!f.includes(a)}),p.length?[4,Ju(o,p)]:[3,3]):[3,3];case 2:_.sent(),_.label=3;case 3:return[4,Nf(o,c)];case 4:return _.sent(),[2,e]}})})},d_=function(o,u){return Fe(void 0,void 0,void 0,function(){var e,c,f;return ze(this,function(i){switch(i.label){case 0:return Y("getStoreEntryValue"),[4,Wi(o,u)];case 1:return e=i.sent(),e?(c=xn([],mn(e.values()),!1),f=c.join(""),[2,Ri(f)]):[2,null]}})})},v_=function(o,u){return Fe(void 0,void 0,void 0,function(){var e,c;return ze(this,function(f){switch(f.label){case 0:return Y("deleteStoreEntry"),[4,Wi(o,u)];case 1:return e=f.sent(),e?(c=xn([],mn(e.keys()),!1),[4,Ju(o,c)]):[3,3];case 2:f.sent(),f.label=3;case 3:return[2]}})})},p_=function(o){return Fe(void 0,void 0,void 0,function(){var u,e;return ze(this,function(c){switch(c.label){case 0:return[4,qf(o)];case 1:return u=c.sent(),e=u.map(function(f){return Lu(f)}),[2,e]}})})},g_=function(o,u){return Fe(void 0,void 0,void 0,function(){var e,c,f;return ze(this,function(i){switch(i.label){case 0:return Y("getGlobalStoreEntryValue"),[4,bn(o,u)];case 1:return e=i.sent(),e?(c=xn([],mn(e.values()),!1),f=c.join(""),[2,Ri(f)]):[2,null]}})})};var Hr=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Jr=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ki=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},$i=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},A_="[experience-app-sdk] The websocket server could not be found, make sure the proxy command is running from the experience-app-cli",S_=function(o){return Hr(void 0,void 0,void 0,function(){var u,e,c,f,i;return Jr(this,function(h){switch(h.label){case 0:return u=o[0],e=u.file,c=u.filename,e instanceof File||e instanceof Blob?[4,Oe(e)]:[3,2];case 1:return f=h.sent(),i={file:f,filename:c},[2,[i]];case 2:throw new Error("Upload file is not instance of File or Blob")}})})},E_=function(o){var u=o[0];if(o[0]instanceof Error){var e=y_.isAxiosError(u)?u.toJSON():u;return[m_(e,{maxDepth:1})]}return[u]},rl=function(o,u){return Hr(void 0,void 0,void 0,function(){var e,c,f,i,h,p,_;return Jr(this,function(a){switch(a.label){case 0:switch(e=__(),c=null,f=$i([],Ki(u),!1),i=o,i){case"upload":return[3,1];case"handleErrorWithToast":return[3,3];case"requestOnShowpadInstance":return[3,4]}return[3,6];case 1:return c=new w_,[4,S_(u)];case 2:return f=a.sent(),[3,7];case 3:return f=E_(u),[3,7];case 4:return h=f,p=0,[4,Zc(u[0])];case 5:return h[p]=a.sent(),[3,7];case 6:return[3,7];case 7:return _={id:e,method:o,args:f},[2,{emitter:c,message:_}]}})})},el=function(o,u,e,c,f,i,h){return Hr(void 0,void 0,void 0,function(){var p,_,a,g,A,N,H,j;return Jr(this,function(G){switch(G.label){case 0:return p=er(e),_=p.requestId,a=p.isError,g=p.response,o!==_?[3,11]:a?(i(b_(g)),[3,11]):[3,1];case 1:return c?(x_(g)?(A=g.uploadStatus,N=g.data,c.emit(A,N),["success","failed"].includes(A)&&h()):f(c),[3,11]):[3,2];case 2:switch(h(),H=void 0,j=u,j){case"requestOnShowpadInstance":return[3,3];case"getAssetFile":return[3,5];case"getAssetPreview":return[3,7]}return[3,9];case 3:return[4,Qc(g)];case 4:return H=G.sent(),[3,10];case 5:return[4,Ce(g)];case 6:return H=G.sent(),[3,10];case 7:return[4,Ce(g)];case 8:return H=G.sent(),[3,10];case 9:return H=g,[3,10];case 10:f(H),G.label=11;case 11:return[2]}})})},k_=function(o){for(var u=[],e=1;e<arguments.length;e++)u[e-1]=arguments[e];return Hr(void 0,void 0,void 0,function(){var c,f,i;return Jr(this,function(h){switch(h.label){case 0:return[4,rl(o,u)];case 1:return c=h.sent(),f=c.emitter,i=c.message,[2,new Promise(function(p,_){var a=new WebSocket("ws://localhost:9001/");a.onopen=function(){a.send(ue(i))},a.onmessage=function(g){return Hr(void 0,void 0,void 0,function(){return Jr(this,function(A){switch(A.label){case 0:return[4,el(i.id,o,g.data,f,p,_,function(){return a.close()})];case 1:return A.sent(),[2]}})})},a.onerror=function(){a.close(),_(new Error(A_))}})]}})})},C_=function(o){for(var u=[],e=1;e<arguments.length;e++)u[e-1]=arguments[e];return Hr(void 0,void 0,void 0,function(){var c,f,i;return Jr(this,function(h){switch(h.label){case 0:return[4,rl(o,u)];case 1:return c=h.sent(),f=c.emitter,i=c.message,[2,new Promise(function(p,_){window.parent.postMessage(ue(i),"*");var a=function(g){return Hr(void 0,void 0,void 0,function(){return Jr(this,function(A){switch(A.label){case 0:return[4,el(i.id,o,g.data,f,p,_,function(){return window.removeEventListener("message",a)})];case 1:return A.sent(),[2]}})})};window.addEventListener("message",a)})]}})})},U=function(o){for(var u=[],e=1;e<arguments.length;e++)u[e-1]=arguments[e];return Hr(void 0,void 0,void 0,function(){var c;return Jr(this,function(f){switch(c=Ar(),c){case"development":return[2,k_.apply(void 0,$i([o],Ki(u),!1))];case"production":return[2,Ji[o].apply(Ji,$i([],Ki(u),!1))];case"showpadize":return[2,C_.apply(void 0,$i([o],Ki(u),!1))];case"external":throw new Error("Showpad functions can only be called from within the Showpad environment");default:throw new Error('App context "'.concat(c,'" could not be found'))}return[2]})})};var Kr=function(){return Kr=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Kr.apply(this,arguments)},Ct=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Ot=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},T_="Proxy Experience App is not on the same version as the Experience App SDK",ia=Di.version,I_=function(o){return Ct(void 0,void 0,void 0,function(){return Ot(this,function(u){return[2,new Promise(function(e,c){var f=5,i="onShowpadLibLoaded didn't return in ".concat(f," seconds. Is the Proxy App running?"),h=setTimeout(function(){c(new Error(i))},f*1e3),p=Ar();p!=="development"&&clearTimeout(h),(p==="development"||p==="showpadize")&&cf();var _=function(){return Ct(void 0,void 0,void 0,function(){var a,g,A;return Ot(this,function(N){switch(N.label){case 0:a=o!=null?o:ia,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,U("onShowpadLibLoaded",a)];case 2:return g=N.sent(),g||console.warn(T_),clearTimeout(h),e(g),[3,4];case 3:return A=N.sent(),c(A),[3,4];case 4:return[2]}})})};console.debug("Showpad SDK version:",ia),sessionStorage.clear(),_()})]})})},nl=function(o){return Ct(void 0,void 0,void 0,function(){var u,e,c;return Ot(this,function(f){switch(f.label){case 0:return[4,U("parseConfig")];case 1:return u=f.sent(),Ai()&&(o!=null&&o.localLabels)?[4,O_.get("./config.json")]:[3,3];case 2:e=f.sent(),c=e.data.labels,u.labels=c,f.label=3;case 3:return[2,Ii(u)]}})})},Tu=function(o){U("openShowpadUrl",o)},R_=function(o,u){u===void 0&&(u=!0),U("openAssetViewer",o,u)},D_=function(){return Ct(void 0,void 0,void 0,function(){var o,u,e;return Ot(this,function(c){switch(c.label){case 0:return Er("isAdmin"),[4,Sr("v3")];case 1:return o=c.sent(),[4,o.get("/users/me.json")];case 2:return u=c.sent(),e=u.data.response,[2,e.userType==="admin"||e.userType==="owner"]}})})},L_=function(o){var u={type:"pageview",touchpoint:o};Ui(u)},U_=function(o){var u={type:"event",touchpoint:o};Ui(u)},j_=function(o){return Ct(void 0,void 0,void 0,function(){return Ot(this,function(u){return[2,U("handleErrorWithToast",o)]})})},il=function(o,u){return u===void 0&&(u=1600),Ct(void 0,void 0,void 0,function(){return Ot(this,function(e){return[2,Promise.all(o.map(function(c){return Ct(void 0,void 0,void 0,function(){var f,i;return Ot(this,function(h){switch(h.label){case 0:return f=[Kr({},c)],i={},[4,Fu(c.id,c.slug)];case 1:return i.fileUrl=h.sent(),[4,ju(c.id,c.slug,u)];case 2:return[2,Kr.apply(void 0,f.concat([(i.previewUrl=h.sent(),i)]))]}})})}))]})})},F_=function(o){return Ct(void 0,void 0,void 0,function(){var u;return Ot(this,function(e){switch(e.label){case 0:return[4,nl(o)];case 1:return u=e.sent(),[2,vf(u,il)]}})})},An=function(o,u){return Ct(void 0,void 0,void 0,function(){var e,c,f,i,h,p,_,a,g,A,N;return Ot(this,function(H){switch(H.label){case 0:return Er("refreshShowpadOAuthApi"),e="refreshShowpadOAuthApi",c=Fi(o,u),[4,Ie(e,c)];case 1:if(f=H.sent(),f!=="expired"&&f!=="unavailable")return[2,f];H.label=2;case 2:if(H.trys.push([2,5,,6]),i=localStorage.getItem(c),!i)throw new Error("Refresh Token is not available");return h=JSON.parse(i),p=new FormData,p.append("grant_type","refresh_token"),p.append("client_id",o),p.append("client_secret",u),p.append("refresh_token",h.refresh_token),_=ae(),[4,Pu(p)];case 3:return a=H.sent(),g=Kr(Kr({},a),{request_date:_}),[4,Te(c,JSON.stringify(g))];case 4:return H.sent(),mt(e),A=ki(a),[2,A];case 5:throw N=H.sent(),mt(e),N;case 6:return[2]}})})},ol=function(o,u,e,c){return Ct(void 0,void 0,void 0,function(){var f,i,h,p;return Ot(this,function(_){switch(_.label){case 0:return[4,Ie(e,c)];case 1:return f=_.sent(),f!=="expired"&&f!=="unavailable"?[2,f]:[4,vn(c)];case 2:if(i=_.sent(),i!=="expired"&&i!=="unavailable")return mt(e),[2,i];if(i!=="expired")return[3,6];_.label=3;case 3:return _.trys.push([3,5,,6]),[4,An(o,u)];case 4:return h=_.sent(),mt(e),[2,h];case 5:return p=_.sent(),console.warn(p),[3,6];case 6:return[2,null]}})})},Zi=function(o,u,e,c){return Ct(void 0,void 0,void 0,function(){var f,i,h,p,_,a,g,A,N,H;return Ot(this,function(j){switch(j.label){case 0:return Er("getShowpadOAuthApi"),f="getShowpadOAuthApi",i=Fi(o,u),[4,ol(o,u,f,i)];case 1:if(h=j.sent(),h!==null)return[2,h];j.label=2;case 2:return j.trys.push([2,6,,7]),[4,qr()];case 3:if(p=j.sent(),!(e.length===0||e.includes(p.email)))throw new Error("Current user is not allowed to use the OAuth Client.");return _=new FormData,_.append("grant_type","password"),_.append("client_id",o),_.append("client_secret",u),_.append("username",p.userName),_.append("password",c),a=ae(),[4,Pu(_)];case 4:return g=j.sent(),A=Kr(Kr({},g),{request_date:a}),[4,Te(i,JSON.stringify(A))];case 5:return j.sent(),mt(f),N=ki(g),[2,N];case 6:throw H=j.sent(),mt(f),H;case 7:return[2]}})})},oa=function(o,u,e,c){return Ct(void 0,void 0,void 0,function(){var f,i,h,p,_,a;return Ot(this,function(g){switch(g.label){case 0:return Er("getShowpadOAuthApiInteractive"),f="getShowpadOAuthApiInteractive",i=Fi(o,u),[4,ol(o,u,f,i)];case 1:if(h=g.sent(),h!==null)return[2,h];g.label=2;case 2:return g.trys.push([2,5,,6]),[4,Af(f,c)];case 3:return p=g.sent(),[4,Zi(o,u,e,p)];case 4:return _=g.sent(),mt(f),[2,_];case 5:throw a=g.sent(),mt(f),a;case 6:return[2]}})})},Cu=function(o){return Ct(void 0,void 0,void 0,function(){return Ot(this,function(u){return[2,U("requestOnShowpadInstance",o)]})})},z_=function(o,u,e){return Ct(void 0,void 0,void 0,function(){return Ot(this,function(c){return[2,U("getAssetPreview",o,u,e)]})})},B_=function(o,u){return Ct(void 0,void 0,void 0,function(){return Ot(this,function(e){return[2,U("getAssetFile",o,u)]})})};var Cr=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Or=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ua=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},aa=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},N_=function(o,u){return Cr(void 0,void 0,void 0,function(){var e;return Or(this,function(c){switch(c.label){case 0:return Er("createStore"),[4,Vi(u)];case 1:return e=c.sent(),[4,e.post("/appsdb/stores/".concat(o))];case 2:return c.sent(),[2]}})})},P_=function(o){return Cr(void 0,void 0,void 0,function(){return Or(this,function(u){return[2,U("getStoreEntries",o)]})})},V_=function(o,u,e){return Cr(void 0,void 0,void 0,function(){return Or(this,function(c){return Vu(e),[2,U("setStoreEntryValue",o,u,e)]})})},M_=function(o,u){return Cr(void 0,void 0,void 0,function(){return Or(this,function(e){return[2,U("getStoreEntryValue",o,u)]})})},q_=function(o,u){return Cr(void 0,void 0,void 0,function(){return Or(this,function(e){return[2,U("deleteStoreEntry",o,u)]})})},Sn=function(o){return Cr(void 0,void 0,void 0,function(){return Or(this,function(u){return[2,U("getGlobalStoreEntries",o)]})})},G_=function(o,u,e,c){return Cr(void 0,void 0,void 0,function(){var f,i,h,p,_;return Or(this,function(a){switch(a.label){case 0:return Er("setGlobalStoreEntryValue"),Vu(e),f=Gi(u,e),i=aa([],ua(f.keys()),!1),[4,bn(o,u)];case 1:return h=a.sent(),h?(p=aa([],ua(h.keys()),!1),_=p.filter(function(g){return!i.includes(g)}),_.length?[4,Ku(o,_,c)]:[3,3]):[3,3];case 2:a.sent(),a.label=3;case 3:return[4,Pf(o,f,c)];case 4:return a.sent(),[2,e]}})})},sa=function(o,u){return Cr(void 0,void 0,void 0,function(){return Or(this,function(e){return[2,U("getGlobalStoreEntryValue",o,u)]})})},W_=function(o,u,e){return Cr(void 0,void 0,void 0,function(){var c,f;return Or(this,function(i){switch(i.label){case 0:return Er("deleteGlobalStoreEntry"),[4,bn(o,u)];case 1:return c=i.sent(),c?(f=aa([],ua(c.keys()),!1),[4,Ku(o,f,e)]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})};var En=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},kn=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},H_=function(o,u,e,c){return En(void 0,void 0,void 0,function(){return kn(this,function(f){return[2,ku(u,e,c)]})})},J_=function(o){return En(void 0,void 0,void 0,function(){return kn(this,function(u){return[2,ku(Bu,Nu,o)]})})},Sr=function(o,u){return En(void 0,void 0,void 0,function(){return kn(this,function(e){return[2,Ei(pn,zu,o,u)]})})},K_=function(o,u,e,c,f){return En(void 0,void 0,void 0,function(){return kn(this,function(i){return[2,Ei(function(){return Zi(o,u,e,c)},function(){return An(o,u)},f)]})})},$_=function(o,u,e,c,f){return En(void 0,void 0,void 0,function(){return kn(this,function(i){return[2,Ei(function(){return oa(o,u,e,f)},function(){return An(o,u)},c)]})})};import Z_ from"axios";import{deserializeError as Y_,serializeError as X_}from"serialize-error";var Be=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Ne=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},al=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},sl=function(o,u,e){if(e||arguments.length===2)for(var c=0,f=u.length,i;c<f;c++)(i||!(c in u))&&(i||(i=Array.prototype.slice.call(u,0,c)),i[c]=u[c]);return o.concat(i||Array.prototype.slice.call(u))},Q_="SHOWPADIZE EXP_APP",cl=function(o){return"The Experience App SDK of the app where you're calling showpadize() doesn't support ".concat(o,". Please update the Experience App SDK of the app where you're calling showpadize() to the latest version.")},Pe=function(o,u,e,c,f){var i={requestId:e,isError:c,response:f};if(o){var h=o;h.postMessage(ue(i),u)}var p=c?console.error:console.debug;p("".concat(Q_,": Response from Showpad sent to Remote App:"),i)},tb=function(o,u){return Be(void 0,void 0,void 0,function(){var e,c,f,i,h,p,_;return Ne(this,function(a){switch(a.label){case 0:return e=er(o.data),c=e.id,f=e.args,i=f[0],[4,Yc(i)];case 1:return h=a.sent(),[4,U("requestOnShowpadInstance",h)];case 2:return p=a.sent(),[4,Xc(p)];case 3:return _=a.sent(),Pe(o.source,u,c,!1,_),[2]}})})},rb=function(o,u){return Be(void 0,void 0,void 0,function(){var e,c,f,i,h;return Ne(this,function(p){switch(p.label){case 0:return e=er(o.data),c=e.id,f=e.args,i=Y_(f[0]),[4,U("handleErrorWithToast",i)];case 1:return h=p.sent(),Pe(o.source,u,c,!1,h),[2]}})})},eb=function(o,u){return Be(void 0,void 0,void 0,function(){var e,c,f;return Ne(this,function(i){switch(i.label){case 0:return e=er(o.data),c=e.id,f=e.args,[4,tf(f[0],function(h){return U("upload",h)},function(h){return Pe(o.source,u,c,!1,h)})];case 1:return i.sent(),[2]}})})},ul=function(o,u){return Be(void 0,void 0,void 0,function(){var e,c,f,i,h,p;return Ne(this,function(_){switch(_.label){case 0:if(e=er(o.data),c=e.id,f=e.args,i=e.method,!Cn[i])throw new Error(cl(i));return[4,U.apply(void 0,sl([i],al(f),!1))];case 1:return h=_.sent(),[4,Oe(h)];case 2:return p=_.sent(),Pe(o.source,u,c,!1,p),[2]}})})},nb=function(o,u){return Be(void 0,void 0,void 0,function(){var e,c,f,i,h;return Ne(this,function(p){switch(p.label){case 0:if(e=er(o.data),c=e.id,f=e.args,i=e.method,!Cn[i])throw new Error(cl(i));return[4,U.apply(void 0,sl([i],al(f),!1))];case 1:return h=p.sent(),Pe(o.source,u,c,!1,h),[2]}})})},ib=function(o,u){var e=new URL(u),c=document.createElement("iframe");c.name="".concat(Su,"-").concat(o),c.src=e.href,c.style.width="100%",c.style.height="100%",c.style.borderWidth="0px";var f=document.getElementById(o);if(f)f.appendChild(c);else throw new Error("domId (".concat(o,") not found"));window.addEventListener("message",function(i){return Be(void 0,void 0,void 0,function(){var h,p,_,a,g,A;return Ne(this,function(N){switch(N.label){case 0:if(i.origin!==e.origin)return[3,16];if(!Du(i.data))return[2];if(h=er(i.data),p=h.id,_=h.method,!(p&&_))return[3,16];N.label=1;case 1:switch(N.trys.push([1,15,,16]),a=_,a){case"requestOnShowpadInstance":return[3,2];case"getAssetFile":return[3,4];case"getAssetPreview":return[3,6];case"handleErrorWithToast":return[3,8];case"upload":return[3,10]}return[3,12];case 2:return[4,tb(i,e.origin)];case 3:return N.sent(),[3,14];case 4:return[4,ul(i,e.origin)];case 5:return N.sent(),[3,14];case 6:return[4,ul(i,e.origin)];case 7:return N.sent(),[3,14];case 8:return[4,rb(i,e.origin)];case 9:return N.sent(),[3,14];case 10:return[4,eb(i,e.origin)];case 11:return N.sent(),[3,14];case 12:return[4,nb(i,e.origin)];case 13:N.sent(),N.label=14;case 14:return[3,16];case 15:return g=N.sent(),A=Z_.isAxiosError(g)?g.toJSON():g,Pe(i.source,e.origin,p,!0,X_(A,{maxDepth:4})),[3,16];case 16:return[2]}})})})};var Ve=function(){return Ve=Object.assign||function(o){for(var u,e=1,c=arguments.length;e<c;e++){u=arguments[e];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(o[f]=u[f])}return o},Ve.apply(this,arguments)},Yi=function(o,u,e,c){function f(i){return i instanceof e?i:new e(function(h){h(i)})}return new(e||(e=Promise))(function(i,h){function p(g){try{a(c.next(g))}catch(A){h(A)}}function _(g){try{a(c.throw(g))}catch(A){h(A)}}function a(g){g.done?i(g.value):f(g.value).then(p,_)}a((c=c.apply(o,u||[])).next())})},Xi=function(o,u){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},c,f,i,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(a){return function(g){return _([a,g])}}function _(a){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,a[0]&&(e=0)),e;)try{if(c=1,f&&(i=a[0]&2?f.return:a[0]?f.throw||((i=f.return)&&i.call(f),0):f.next)&&!(i=i.call(f,a[1])).done)return i;switch(f=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,f=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){e.label=a[1];break}if(a[0]===6&&e.label<i[1]){e.label=i[1],i=a;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(a);break}i[2]&&e.ops.pop(),e.trys.pop();continue}a=u.call(o,e)}catch(g){a=[6,g],f=0}finally{c=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},ob=function(o,u){var e=typeof Symbol=="function"&&o[Symbol.iterator];if(!e)return o;var c=e.call(o),f,i=[],h;try{for(;(u===void 0||u-- >0)&&!(f=c.next()).done;)i.push(f.value)}catch(p){h={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(h)throw h.error}}return i},ca={sdmSchemas:null},sb={string:"",number:0,integer:0,object:{},array:[],null:null,boolean:!1},cb=new ub({useDefaults:"empty",removeAdditional:"all",coerceTypes:!0}),fa=function(){return Yi(void 0,void 0,void 0,function(){var o;return Xi(this,function(u){switch(u.label){case 0:return ca.sdmSchemas!==null?[3,2]:[4,Sn(ab)];case 1:o=u.sent(),ca.sdmSchemas=o.map(Kc),u.label=2;case 2:return[2,ca.sdmSchemas]}})})},fb=function(o,u){var e=u;if(!Array.isArray(o.required))throw new Error("Invalid required value. Expecting an Array.");return o.required.forEach(function(c){o.properties&&Object.entries(o.properties).forEach(function(f){var i=ob(f,2),h=i[0],p=i[1],_=typeof p!="boolean"&&h===c&&!p.default&&!(c in e);if(_)if(console.info("".concat(h," has no default value, setting default value.")),p.type&&!Array.isArray(p.type))e[h]=sb[p.type];else throw new Error("The JSON schema is not supported")})}),e},lb=function(o,u){var e=o.find(function(c){return c.id===u});if(e)return e.jsonSchema;throw new Error("SdmSchema ".concat(u," not found"))},la=function(o,u,e,c){var f=e.record,i=e.sdmSchemaId,h={id:o,sdmSchemaId:i,sdmStoreId:u},p=lb(c,i),_=Jc(p),a=cb.compile(_);if(a(f))return Ve(Ve({},f),h);var g=fb(p,f);return Ve(Ve({},g),h)},hb=function(o){return Yi(void 0,void 0,void 0,function(){var u,e;return Xi(this,function(c){switch(c.label){case 0:return[4,Sn(xi(o))];case 1:return u=c.sent(),[4,fa()];case 2:return e=c.sent(),[2,u.map(function(f){var i=f.id,h=f.value;return la(i,o,h,e)})]}})})},db=function(o,u){return Yi(void 0,void 0,void 0,function(){var e,c,f;return Xi(this,function(i){switch(i.label){case 0:return[4,Sn(xi(o))];case 1:return e=i.sent(),c=e.filter(function(h){return h.value.sdmSchemaId===u}),[4,fa()];case 2:return f=i.sent(),[2,c.map(function(h){var p=h.id,_=h.value;return la(p,o,_,f)})]}})})},vb=function(o,u){return Yi(void 0,void 0,void 0,function(){var e,c;return Xi(this,function(f){switch(f.label){case 0:return[4,sa(xi(o),u)];case 1:return e=f.sent(),e?[4,fa()]:[2,null];case 2:return c=f.sent(),[2,la(u,o,e,c)]}})})};export{fl as Sdm,Cn as Showpad};
/*! Bundled license information:

@showpad/experience-app-internal/lib/index.js:
  (*! Bundled license information:
  
  lodash/lodash.js:
    (**
     * @license
     * Lodash <https://lodash.com/>
     * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
     * Released under MIT license <https://lodash.com/license>
     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
     * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
     *)
  *)
*/
